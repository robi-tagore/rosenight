"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
exports.id = "vendor-chunks/m3u8stream";
exports.ids = ["vendor-chunks/m3u8stream"];
exports.modules = {

/***/ "(rsc)/./node_modules/m3u8stream/dist/dash-mpd-parser.js":
/*!*********************************************************!*\
  !*** ./node_modules/m3u8stream/dist/dash-mpd-parser.js ***!
  \*********************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nvar __importDefault = (void 0) && (void 0).__importDefault || function(mod) {\n    return mod && mod.__esModule ? mod : {\n        \"default\": mod\n    };\n};\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nconst stream_1 = __webpack_require__(/*! stream */ \"stream\");\nconst sax_1 = __importDefault(__webpack_require__(/*! sax */ \"(rsc)/./node_modules/sax/lib/sax.js\"));\nconst parse_time_1 = __webpack_require__(/*! ./parse-time */ \"(rsc)/./node_modules/m3u8stream/dist/parse-time.js\");\n/**\n * A wrapper around sax that emits segments.\n */ class DashMPDParser extends stream_1.Writable {\n    constructor(targetID){\n        super();\n        this._parser = sax_1.default.createStream(false, {\n            lowercase: true\n        });\n        this._parser.on(\"error\", this.destroy.bind(this));\n        let lastTag;\n        let currtime = 0;\n        let seq = 0;\n        let segmentTemplate;\n        let timescale, offset, duration, baseURL;\n        let timeline = [];\n        let getSegments = false;\n        let gotSegments = false;\n        let isStatic;\n        let treeLevel;\n        let periodStart;\n        const tmpl = (str)=>{\n            const context = {\n                RepresentationID: targetID,\n                Number: seq,\n                Time: currtime\n            };\n            return str.replace(/\\$(\\w+)\\$/g, (m, p1)=>`${context[p1]}`);\n        };\n        this._parser.on(\"opentag\", (node)=>{\n            switch(node.name){\n                case \"mpd\":\n                    currtime = node.attributes.availabilitystarttime ? new Date(node.attributes.availabilitystarttime).getTime() : 0;\n                    isStatic = node.attributes.type !== \"dynamic\";\n                    break;\n                case \"period\":\n                    // Reset everything on <Period> tag.\n                    seq = 0;\n                    timescale = 1000;\n                    duration = 0;\n                    offset = 0;\n                    baseURL = [];\n                    treeLevel = 0;\n                    periodStart = parse_time_1.durationStr(node.attributes.start) || 0;\n                    break;\n                case \"segmentlist\":\n                    seq = parseInt(node.attributes.startnumber) || seq;\n                    timescale = parseInt(node.attributes.timescale) || timescale;\n                    duration = parseInt(node.attributes.duration) || duration;\n                    offset = parseInt(node.attributes.presentationtimeoffset) || offset;\n                    break;\n                case \"segmenttemplate\":\n                    segmentTemplate = node.attributes;\n                    seq = parseInt(node.attributes.startnumber) || seq;\n                    timescale = parseInt(node.attributes.timescale) || timescale;\n                    break;\n                case \"segmenttimeline\":\n                case \"baseurl\":\n                    lastTag = node.name;\n                    break;\n                case \"s\":\n                    timeline.push({\n                        duration: parseInt(node.attributes.d),\n                        repeat: parseInt(node.attributes.r),\n                        time: parseInt(node.attributes.t)\n                    });\n                    break;\n                case \"adaptationset\":\n                case \"representation\":\n                    treeLevel++;\n                    if (!targetID) {\n                        targetID = node.attributes.id;\n                    }\n                    getSegments = node.attributes.id === `${targetID}`;\n                    if (getSegments) {\n                        if (periodStart) {\n                            currtime += periodStart;\n                        }\n                        if (offset) {\n                            currtime -= offset / timescale * 1000;\n                        }\n                        this.emit(\"starttime\", currtime);\n                    }\n                    break;\n                case \"initialization\":\n                    if (getSegments) {\n                        this.emit(\"item\", {\n                            url: baseURL.filter((s)=>!!s).join(\"\") + node.attributes.sourceurl,\n                            seq: seq,\n                            init: true,\n                            duration: 0\n                        });\n                    }\n                    break;\n                case \"segmenturl\":\n                    if (getSegments) {\n                        gotSegments = true;\n                        let tl = timeline.shift();\n                        let segmentDuration = ((tl === null || tl === void 0 ? void 0 : tl.duration) || duration) / timescale * 1000;\n                        this.emit(\"item\", {\n                            url: baseURL.filter((s)=>!!s).join(\"\") + node.attributes.media,\n                            seq: seq++,\n                            duration: segmentDuration\n                        });\n                        currtime += segmentDuration;\n                    }\n                    break;\n            }\n        });\n        const onEnd = ()=>{\n            if (isStatic) {\n                this.emit(\"endlist\");\n            }\n            if (!getSegments) {\n                this.destroy(Error(`Representation '${targetID}' not found`));\n            } else {\n                this.emit(\"end\");\n            }\n        };\n        this._parser.on(\"closetag\", (tagName)=>{\n            switch(tagName){\n                case \"adaptationset\":\n                case \"representation\":\n                    treeLevel--;\n                    if (segmentTemplate && timeline.length) {\n                        gotSegments = true;\n                        if (segmentTemplate.initialization) {\n                            this.emit(\"item\", {\n                                url: baseURL.filter((s)=>!!s).join(\"\") + tmpl(segmentTemplate.initialization),\n                                seq: seq,\n                                init: true,\n                                duration: 0\n                            });\n                        }\n                        for (let { duration: itemDuration, repeat, time } of timeline){\n                            itemDuration = itemDuration / timescale * 1000;\n                            repeat = repeat || 1;\n                            currtime = time || currtime;\n                            for(let i = 0; i < repeat; i++){\n                                this.emit(\"item\", {\n                                    url: baseURL.filter((s)=>!!s).join(\"\") + tmpl(segmentTemplate.media),\n                                    seq: seq++,\n                                    duration: itemDuration\n                                });\n                                currtime += itemDuration;\n                            }\n                        }\n                    }\n                    if (gotSegments) {\n                        this.emit(\"endearly\");\n                        onEnd();\n                        this._parser.removeAllListeners();\n                        this.removeAllListeners(\"finish\");\n                    }\n                    break;\n            }\n        });\n        this._parser.on(\"text\", (text)=>{\n            if (lastTag === \"baseurl\") {\n                baseURL[treeLevel] = text;\n                lastTag = null;\n            }\n        });\n        this.on(\"finish\", onEnd);\n    }\n    _write(chunk, encoding, callback) {\n        this._parser.write(chunk);\n        callback();\n    }\n}\nexports[\"default\"] = DashMPDParser; //# sourceMappingURL=dash-mpd-parser.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbTN1OHN0cmVhbS9kaXN0L2Rhc2gtbXBkLXBhcnNlci5qcyIsIm1hcHBpbmdzIjoiQUFBYTtBQUNiLElBQUlBLGtCQUFrQixDQUFDLE1BQUcsS0FBSyxPQUFHLEVBQUVBLGVBQWUsSUFBSyxTQUFVQyxHQUFHO0lBQ2pFLE9BQU8sT0FBUUEsSUFBSUMsVUFBVSxHQUFJRCxNQUFNO1FBQUUsV0FBV0E7SUFBSTtBQUM1RDtBQUNBRSw4Q0FBNkM7SUFBRUcsT0FBTztBQUFLLENBQUMsRUFBQztBQUM3RCxNQUFNQyxXQUFXQyxtQkFBT0EsQ0FBQyxzQkFBUTtBQUNqQyxNQUFNQyxRQUFRVCxnQkFBZ0JRLG1CQUFPQSxDQUFDLGdEQUFLO0FBQzNDLE1BQU1FLGVBQWVGLG1CQUFPQSxDQUFDLHdFQUFjO0FBQzNDOztDQUVDLEdBQ0QsTUFBTUcsc0JBQXNCSixTQUFTSyxRQUFRO0lBQ3pDQyxZQUFZQyxRQUFRLENBQUU7UUFDbEIsS0FBSztRQUNMLElBQUksQ0FBQ0MsT0FBTyxHQUFHTixNQUFNTyxPQUFPLENBQUNDLFlBQVksQ0FBQyxPQUFPO1lBQUVDLFdBQVc7UUFBSztRQUNuRSxJQUFJLENBQUNILE9BQU8sQ0FBQ0ksRUFBRSxDQUFDLFNBQVMsSUFBSSxDQUFDQyxPQUFPLENBQUNDLElBQUksQ0FBQyxJQUFJO1FBQy9DLElBQUlDO1FBQ0osSUFBSUMsV0FBVztRQUNmLElBQUlDLE1BQU07UUFDVixJQUFJQztRQUNKLElBQUlDLFdBQVdDLFFBQVFDLFVBQVVDO1FBQ2pDLElBQUlDLFdBQVcsRUFBRTtRQUNqQixJQUFJQyxjQUFjO1FBQ2xCLElBQUlDLGNBQWM7UUFDbEIsSUFBSUM7UUFDSixJQUFJQztRQUNKLElBQUlDO1FBQ0osTUFBTUMsT0FBTyxDQUFDQztZQUNWLE1BQU1DLFVBQVU7Z0JBQ1pDLGtCQUFrQnpCO2dCQUNsQjBCLFFBQVFoQjtnQkFDUmlCLE1BQU1sQjtZQUNWO1lBQ0EsT0FBT2MsSUFBSUssT0FBTyxDQUFDLGNB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SUFBSSxHQUFHQSxJQUFJdEIsUUFBUXNCLElBQUs7Z0NBQzdCLElBQUksQ0FBQ2pCLElBQUksQ0FBQyxRQUFRO29DQUNkQyxLQUFLcEMsUUFBUXFDLE1BQU0sQ0FBQ0MsQ0FBQUEsSUFBSyxDQUFDLENBQUNBLEdBQUdDLElBQUksQ0FBQyxNQUMvQmhDLEtBQUtYLGdCQUFnQmlELEtBQUs7b0NBQzlCbEQsS0FBS0E7b0NBQ0xJLFVBQVVvRDtnQ0FDZDtnQ0FDQXpELFlBQVl5RDs0QkFDaEI7d0JBQ0o7b0JBQ0o7b0JBQ0EsSUFBSWhELGFBQWE7d0JBQ2IsSUFBSSxDQUFDZ0MsSUFBSSxDQUFDO3dCQUNWVzt3QkFDQSxJQUFJLENBQUM1RCxPQUFPLENBQUNtRSxrQkFBa0I7d0JBQy9CLElBQUksQ0FBQ0Esa0JBQWtCLENBQUM7b0JBQzVCO29CQUNBO1lBQ1I7UUFDSjtRQUNBLElBQUksQ0FBQ25FLE9BQU8sQ0FBQ0ksRUFBRSxDQUFDLFFBQVFnRSxDQUFBQTtZQUNwQixJQUFJN0QsWUFBWSxXQUFXO2dCQUN2Qk8sT0FBTyxDQUFDSyxVQUFVLEdBQUdpRDtnQkFDckI3RCxVQUFVO1lBQ2Q7UUFDSjtRQUNBLElBQUksQ0FBQ0gsRUFBRSxDQUFDLFVBQVV3RDtJQUN0QjtJQUNBUyxPQUFPQyxLQUFLLEVBQUVDLFFBQVEsRUFBRUMsUUFBUSxFQUFFO1FBQzlCLElBQUksQ0FBQ3hFLE9BQU8sQ0FBQ3lFLEtBQUssQ0FBQ0g7UUFDbkJFO0lBQ0o7QUFDSjtBQUNBbEYsa0JBQWUsR0FBR00sZUFDbEIsMkNBQTJDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vcm9zZS8uL25vZGVfbW9kdWxlcy9tM3U4c3RyZWFtL2Rpc3QvZGFzaC1tcGQtcGFyc2VyLmpzPzQ2N2EiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgX19pbXBvcnREZWZhdWx0ID0gKHRoaXMgJiYgdGhpcy5fX2ltcG9ydERlZmF1bHQpIHx8IGZ1bmN0aW9uIChtb2QpIHtcbiAgICByZXR1cm4gKG1vZCAmJiBtb2QuX19lc01vZHVsZSkgPyBtb2QgOiB7IFwiZGVmYXVsdFwiOiBtb2QgfTtcbn07XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5jb25zdCBzdHJlYW1fMSA9IHJlcXVpcmUoXCJzdHJlYW1cIik7XG5jb25zdCBzYXhfMSA9IF9faW1wb3J0RGVmYXVsdChyZXF1aXJlKFwic2F4XCIpKTtcbmNvbnN0IHBhcnNlX3RpbWVfMSA9IHJlcXVpcmUoXCIuL3BhcnNlLXRpbWVcIik7XG4vKipcbiAqIEEgd3JhcHBlciBhcm91bmQgc2F4IHRoYXQgZW1pdHMgc2VnbWVudHMuXG4gKi9cbmNsYXNzIERhc2hNUERQYXJzZXIgZXh0ZW5kcyBzdHJlYW1fMS5Xcml0YWJsZSB7XG4gICAgY29uc3RydWN0b3IodGFyZ2V0SUQpIHtcbiAgICAgICAgc3VwZXIoKTtcbiAgICAgICAgdGhpcy5fcGFyc2VyID0gc2F4XzEuZGVmYXVsdC5jcmVhdGVTdHJlYW0oZmFsc2UsIHsgbG93ZXJjYXNlOiB0cnVlIH0pO1xuICAgICAgICB0aGlzLl9wYXJzZXIub24oJ2Vycm9yJywgdGhpcy5kZXN0cm95LmJpbmQodGhpcykpO1xuICAgICAgICBsZXQgbGFzdFRhZztcbiAgICAgICAgbGV0IGN1cnJ0aW1lID0gMDtcbiAgICAgICAgbGV0IHNlcSA9IDA7XG4gICAgICAgIGxldCBzZWdtZW50VGVtcGxhdGU7XG4gICAgICAgIGxldCB0aW1lc2NhbGUsIG9mZnNldCwgZHVyYXRpb24sIGJhc2VVUkw7XG4gICAgICAgIGxldCB0aW1lbGluZSA9IFtdO1xuICAgICAgICBsZXQgZ2V0U2VnbWVudHMgPSBmYWxzZTtcbiAgICAgICAgbGV0IGdvdFNlZ21lbnRzID0gZmFsc2U7XG4gICAgICAgIGxldCBpc1N0YXRpYztcbiAgICAgICAgbGV0IHRyZWVMZXZlbDtcbiAgICAgICAgbGV0IHBlcmlvZFN0YXJ0O1xuICAgICAgICBjb25zdCB0bXBsID0gKHN0cikgPT4ge1xuICAgICAgICAgICAgY29uc3QgY29udGV4dCA9IHtcbiAgICAgICAgICAgICAgICBSZXByZXNlbnRhdGlvbklEOiB0YXJnZXRJRCxcbiAgICAgICAgICAgICAgICBOdW1iZXI6IHNlcSxcbiAgICAgICAgICAgICAgICBUaW1lOiBjdXJydGltZSxcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICByZXR1cm4gc3RyLnJlcGxhY2UoL1xcJChcXHcrKVxcJC9nLCAobSwgcDEpID0+IGAke2NvbnRleHRbcDFdfWApO1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLl9wYXJzZXIub24oJ29wZW50YWcnLCBub2RlID0+IHtcbiAgICAgICAgICAgIHN3aXRjaCAobm9kZS5uYW1lKSB7XG4gICAgICAgICAgICAgICAgY2FzZSAnbXBkJzpcbiAgICAgICAgICAgICAgICAgICAgY3VycnRpbWUgPVxuICAgICAgICAgICAgICAgICAgICAgICAgbm9kZS5hdHRyaWJ1dGVzLmF2YWlsYWJpbGl0eXN0YXJ0dGltZSA/XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3IERhdGUobm9kZS5hdHRyaWJ1dGVzLmF2YWlsYWJpbGl0eXN0YXJ0dGltZSkuZ2V0VGltZSgpIDogMDtcbiAgICAgICAgICAgICAgICAgICAgaXNTdGF0aWMgPSBub2RlLmF0dHJpYnV0ZXMudHlwZSAhPT0gJ2R5bmFtaWMnO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICdwZXJpb2QnOlxuICAgICAgICAgICAgICAgICAgICAvLyBSZXNldCBldmVyeXRoaW5nIG9uIDxQZXJpb2Q+IHRhZy5cbiAgICAgICAgICAgICAgICAgICAgc2VxID0gMDtcbiAgICAgICAgICAgICAgICAgICAgdGltZXNjYWxlID0gMTAwMDtcbiAgICAgICAgICAgICAgICAgICAgZHVyYXRpb24gPSAwO1xuICAgICAgICAgICAgICAgICAgICBvZmZzZXQgPSAwO1xuICAgICAgICAgICAgICAgICAgICBiYXNlVVJMID0gW107XG4gICAgICAgICAgICAgICAgICAgIHRyZWVMZXZlbCA9IDA7XG4gICAgICAgICAgICAgICAgICAgIHBlcmlvZFN0YXJ0ID0gcGFyc2VfdGltZV8xLmR1cmF0aW9uU3RyKG5vZGUuYXR0cmlidXRlcy5zdGFydCkgfHwgMDtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAnc2VnbWVudGxpc3QnOlxuICAgICAgICAgICAgICAgICAgICBzZXEgPSBwYXJzZUludChub2RlLmF0dHJpYnV0ZXMuc3RhcnRudW1iZXIpIHx8IHNlcTtcbiAgICAgICAgICAgICAgICAgICAgdGltZXNjYWxlID0gcGFyc2VJbnQobm9kZS5hdHRyaWJ1dGVzLnRpbWVzY2FsZSkgfHwgdGltZXNjYWxlO1xuICAgICAgICAgICAgICAgICAgICBkdXJhdGlvbiA9IHBhcnNlSW50KG5vZGUuYXR0cmlidXRlcy5kdXJhdGlvbikgfHwgZHVyYXRpb247XG4gICAgICAgICAgICAgICAgICAgIG9mZnNldCA9IHBhcnNlSW50KG5vZGUuYXR0cmlidXRlcy5wcmVzZW50YXRpb250aW1lb2Zmc2V0KSB8fCBvZmZzZXQ7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ3NlZ21lbnR0ZW1wbGF0ZSc6XG4gICAgICAgICAgICAgICAgICAgIHNlZ21lbnRUZW1wbGF0ZSA9IG5vZGUuYXR0cmlidXRlcztcbiAgICAgICAgICAgICAgICAgICAgc2VxID0gcGFyc2VJbnQobm9kZS5hdHRyaWJ1dGVzLnN0YXJ0bnVtYmVyKSB8fCBzZXE7XG4gICAgICAgICAgICAgICAgICAgIHRpbWVzY2FsZSA9IHBhcnNlSW50KG5vZGUuYXR0cmlidXRlcy50aW1lc2NhbGUpIHx8IHRpbWVzY2FsZTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAnc2VnbWVudHRpbWVsaW5lJzpcbiAgICAgICAgICAgICAgICBjYXNlICdiYXNldXJsJzpcbiAgICAgICAgICAgICAgICAgICAgbGFzdFRhZyA9IG5vZGUubmFtZTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAncyc6XG4gICAgICAgICAgICAgICAgICAgIHRpbWVsaW5lLnB1c2goe1xuICAgICAgICAgICAgICAgICAgICAgICAgZHVyYXRpb246IHBhcnNlSW50KG5vZGUuYXR0cmlidXRlcy5kKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlcGVhdDogcGFyc2VJbnQobm9kZS5hdHRyaWJ1dGVzLnIpLFxuICAgICAgICAgICAgICAgICAgICAgICAgdGltZTogcGFyc2VJbnQobm9kZS5hdHRyaWJ1dGVzLnQpLFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAnYWRhcHRhdGlvbnNldCc6XG4gICAgICAgICAgICAgICAgY2FzZSAncmVwcmVzZW50YXRpb24nOlxuICAgICAgICAgICAgICAgICAgICB0cmVlTGV2ZWwrKztcbiAgICAgICAgICAgICAgICAgICAgaWYgKCF0YXJnZXRJRCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGFyZ2V0SUQgPSBub2RlLmF0dHJpYnV0ZXMuaWQ7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZ2V0U2VnbWVudHMgPSBub2RlLmF0dHJpYnV0ZXMuaWQgPT09IGAke3RhcmdldElEfWA7XG4gICAgICAgICAgICAgICAgICAgIGlmIChnZXRTZWdtZW50cykge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHBlcmlvZFN0YXJ0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycnRpbWUgKz0gcGVyaW9kU3RhcnQ7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAob2Zmc2V0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycnRpbWUgLT0gb2Zmc2V0IC8gdGltZXNjYWxlICogMTAwMDtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZW1pdCgnc3RhcnR0aW1lJywgY3VycnRpbWUpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ2luaXRpYWxpemF0aW9uJzpcbiAgICAgICAgICAgICAgICAgICAgaWYgKGdldFNlZ21lbnRzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmVtaXQoJ2l0ZW0nLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdXJsOiBiYXNlVVJMLmZpbHRlcihzID0+ICEhcykuam9pbignJykgKyBub2RlLmF0dHJpYnV0ZXMuc291cmNldXJsLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlcTogc2VxLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGluaXQ6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZHVyYXRpb246IDAsXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICdzZWdtZW50dXJsJzpcbiAgICAgICAgICAgICAgICAgICAgaWYgKGdldFNlZ21lbnRzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBnb3RTZWdtZW50cyA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgdGwgPSB0aW1lbGluZS5zaGlmdCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHNlZ21lbnREdXJhdGlvbiA9ICgodGwgPT09IG51bGwgfHwgdGwgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHRsLmR1cmF0aW9uKSB8fCBkdXJhdGlvbikgLyB0aW1lc2NhbGUgKiAxMDAwO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5lbWl0KCdpdGVtJywge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVybDogYmFzZVVSTC5maWx0ZXIocyA9PiAhIXMpLmpvaW4oJycpICsgbm9kZS5hdHRyaWJ1dGVzLm1lZGlhLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlcTogc2VxKyssXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZHVyYXRpb246IHNlZ21lbnREdXJhdGlvbixcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgY3VycnRpbWUgKz0gc2VnbWVudER1cmF0aW9uO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgY29uc3Qgb25FbmQgPSAoKSA9PiB7XG4gICAgICAgICAgICBpZiAoaXNTdGF0aWMpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmVtaXQoJ2VuZGxpc3QnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICghZ2V0U2VnbWVudHMpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmRlc3Ryb3koRXJyb3IoYFJlcHJlc2VudGF0aW9uICcke3RhcmdldElEfScgbm90IGZvdW5kYCkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5lbWl0KCdlbmQnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5fcGFyc2VyLm9uKCdjbG9zZXRhZycsIHRhZ05hbWUgPT4ge1xuICAgICAgICAgICAgc3dpdGNoICh0YWdOYW1lKSB7XG4gICAgICAgICAgICAgICAgY2FzZSAnYWRhcHRhdGlvbnNldCc6XG4gICAgICAgICAgICAgICAgY2FzZSAncmVwcmVzZW50YXRpb24nOlxuICAgICAgICAgICAgICAgICAgICB0cmVlTGV2ZWwtLTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHNlZ21lbnRUZW1wbGF0ZSAmJiB0aW1lbGluZS5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGdvdFNlZ21lbnRzID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzZWdtZW50VGVtcGxhdGUuaW5pdGlhbGl6YXRpb24pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmVtaXQoJ2l0ZW0nLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVybDogYmFzZVVSTC5maWx0ZXIocyA9PiAhIXMpLmpvaW4oJycpICtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRtcGwoc2VnbWVudFRlbXBsYXRlLmluaXRpYWxpemF0aW9uKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VxOiBzZXEsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGluaXQ6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGR1cmF0aW9uOiAwLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgeyBkdXJhdGlvbjogaXRlbUR1cmF0aW9uLCByZXBlYXQsIHRpbWUgfSBvZiB0aW1lbGluZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGl0ZW1EdXJhdGlvbiA9IGl0ZW1EdXJhdGlvbiAvIHRpbWVzY2FsZSAqIDEwMDA7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVwZWF0ID0gcmVwZWF0IHx8IDE7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycnRpbWUgPSB0aW1lIHx8IGN1cnJ0aW1lO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcmVwZWF0OyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5lbWl0KCdpdGVtJywge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdXJsOiBiYXNlVVJMLmZpbHRlcihzID0+ICEhcykuam9pbignJykgK1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRtcGwoc2VnbWVudFRlbXBsYXRlLm1lZGlhKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlcTogc2VxKyssXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkdXJhdGlvbjogaXRlbUR1cmF0aW9uLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycnRpbWUgKz0gaXRlbUR1cmF0aW9uO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAoZ290U2VnbWVudHMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZW1pdCgnZW5kZWFybHknKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIG9uRW5kKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl9wYXJzZXIucmVtb3ZlQWxsTGlzdGVuZXJzKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnJlbW92ZUFsbExpc3RlbmVycygnZmluaXNoJyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLl9wYXJzZXIub24oJ3RleHQnLCB0ZXh0ID0+IHtcbiAgICAgICAgICAgIGlmIChsYXN0VGFnID09PSAnYmFzZXVybCcpIHtcbiAgICAgICAgICAgICAgICBiYXNlVVJMW3RyZWVMZXZlbF0gPSB0ZXh0O1xuICAgICAgICAgICAgICAgIGxhc3RUYWcgPSBudWxsO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5vbignZmluaXNoJywgb25FbmQpO1xuICAgIH1cbiAgICBfd3JpdGUoY2h1bmssIGVuY29kaW5nLCBjYWxsYmFjaykge1xuICAgICAgICB0aGlzLl9wYXJzZXIud3JpdGUoY2h1bmspO1xuICAgICAgICBjYWxsYmFjaygpO1xuICAgIH1cbn1cbmV4cG9ydHMuZGVmYXVsdCA9IERhc2hNUERQYXJzZXI7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1kYXNoLW1wZC1wYXJzZXIuanMubWFwIl0sIm5hbWVzIjpbIl9faW1wb3J0RGVmYXVsdCIsIm1vZCIsIl9fZXNNb2R1bGUiLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImV4cG9ydHMiLCJ2YWx1ZSIsInN0cmVhbV8xIiwicmVxdWlyZSIsInNheF8xIiwicGFyc2VfdGltZV8xIiwiRGFzaE1QRFBhcnNlciIsIldyaXRhYmxlIiwiY29uc3RydWN0b3IiLCJ0YXJnZXRJRCIsIl9wYXJzZXIiLCJkZWZhdWx0IiwiY3JlYXRlU3RyZWFtIiwibG93ZXJjYXNlIiwib24iLCJkZXN0cm95IiwiYmluZCIsImxhc3RUYWciLCJjdXJydGltZSIsInNlcSIsInNlZ21lbnRUZW1wbGF0ZSIsInRpbWVzY2FsZSIsIm9mZnNldCIsImR1cmF0aW9uIiwiYmFzZVVSTCIsInRpbWVsaW5lIiwiZ2V0U2VnbWVudHMiLCJnb3RTZWdtZW50cyIsImlzU3RhdGljIiwidHJlZUxldmVsIiwicGVyaW9kU3RhcnQiLCJ0bXBsIiwic3RyIiwiY29udGV4dCIsIlJlcHJlc2VudGF0aW9uSUQiLCJOdW1iZXIiLCJUaW1lIiwicmVwbGFjZSIsIm0iLCJwMSIsIm5vZGUiLCJuYW1lIiwiYXR0cmlidXRlcyIsImF2YWlsYWJpbGl0eXN0YXJ0dGltZSIsIkRhdGUiLCJnZXRUaW1lIiwidHlwZSIsImR1cmF0aW9uU3RyIiwic3RhcnQiLCJwYXJzZUludCIsInN0YXJ0bnVtYmVyIiwicHJlc2VudGF0aW9udGltZW9mZnNldCIsInB1c2giLCJkIiwicmVwZWF0IiwiciIsInRpbWUiLCJ0IiwiaWQiLCJlbWl0IiwidXJsIiwiZmlsdGVyIiwicyIsImpvaW4iLCJzb3VyY2V1cmwiLCJpbml0IiwidGwiLCJzaGlmdCIsInNlZ21lbnREdXJhdGlvbiIsIm1lZGlhIiwib25FbmQiLCJFcnJvciIsInRhZ05hbWUiLCJsZW5ndGgiLCJpbml0aWFsaXphdGlvbiIsIml0ZW1EdXJhdGlvbiIsImkiLCJyZW1vdmVBbGxMaXN0ZW5lcnMiLCJ0ZXh0IiwiX3dyaXRlIiwiY2h1bmsiLCJlbmNvZGluZyIsImNhbGxiYWNrIiwid3JpdGUiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/m3u8stream/dist/dash-mpd-parser.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/m3u8stream/dist/index.js":
/*!***********************************************!*\
  !*** ./node_modules/m3u8stream/dist/index.js ***!
  \***********************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("\nvar __importDefault = (void 0) && (void 0).__importDefault || function(mod) {\n    return mod && mod.__esModule ? mod : {\n        \"default\": mod\n    };\n};\nconst stream_1 = __webpack_require__(/*! stream */ \"stream\");\nconst miniget_1 = __importDefault(__webpack_require__(/*! miniget */ \"(rsc)/./node_modules/miniget/dist/index.js\"));\nconst m3u8_parser_1 = __importDefault(__webpack_require__(/*! ./m3u8-parser */ \"(rsc)/./node_modules/m3u8stream/dist/m3u8-parser.js\"));\nconst dash_mpd_parser_1 = __importDefault(__webpack_require__(/*! ./dash-mpd-parser */ \"(rsc)/./node_modules/m3u8stream/dist/dash-mpd-parser.js\"));\nconst queue_1 = __webpack_require__(/*! ./queue */ \"(rsc)/./node_modules/m3u8stream/dist/queue.js\");\nconst parse_time_1 = __webpack_require__(/*! ./parse-time */ \"(rsc)/./node_modules/m3u8stream/dist/parse-time.js\");\nconst supportedParsers = {\n    m3u8: m3u8_parser_1.default,\n    \"dash-mpd\": dash_mpd_parser_1.default\n};\nlet m3u8stream = (playlistURL, options = {})=>{\n    const stream = new stream_1.PassThrough({\n        highWaterMark: options.highWaterMark\n    });\n    const chunkReadahead = options.chunkReadahead || 3;\n    // 20 seconds.\n    const liveBuffer = options.liveBuffer || 20000;\n    const requestOptions = options.requestOptions;\n    const Parser = supportedParsers[options.parser || (/\\.mpd$/.test(playlistURL) ? \"dash-mpd\" : \"m3u8\")];\n    if (!Parser) {\n        throw TypeError(`parser '${options.parser}' not supported`);\n    }\n    let begin = 0;\n    if (typeof options.begin !== \"undefined\") {\n        begin = typeof options.begin === \"string\" ? parse_time_1.humanStr(options.begin) : Math.max(options.begin - liveBuffer, 0);\n    }\n    const forwardEvents = (req)=>{\n        for (let event of [\n            \"abort\",\n            \"request\",\n            \"response\",\n            \"redirect\",\n            \"retry\",\n            \"reconnect\"\n        ]){\n            req.on(event, stream.emit.bind(stream, event));\n        }\n    };\n    let currSegment;\n    const streamQueue = new queue_1.Queue((req, callback)=>{\n        currSegment = req;\n        // Count the size manually, since the `content-length` header is not\n        // always there.\n        let size = 0;\n        req.on(\"data\", (chunk)=>size += chunk.length);\n        req.pipe(stream, {\n            end: false\n        });\n        req.on(\"end\", ()=>callback(null, size));\n    }, {\n        concurrency: 1\n    });\n    let segmentNumber = 0;\n    let downloaded = 0;\n    const requestQueue = new queue_1.Queue((segment, callback)=>{\n        let reqOptions = Object.assign({}, requestOptions);\n        if (segment.range) {\n            reqOptions.headers = Object.assign({}, reqOptions.headers, {\n                Range: `bytes=${segment.range.start}-${segment.range.end}`\n            });\n        }\n        let req = miniget_1.default(new URL(segment.url, playlistURL).toString(), reqOptions);\n        req.on(\"error\", callback);\n        forwardEvents(req);\n        streamQueue.push(req, (_, size)=>{\n            downloaded += +size;\n            stream.emit(\"progress\", {\n                num: ++segmentNumber,\n                size: size,\n                duration: segment.duration,\n                url: segment.url\n            }, requestQueue.total, downloaded);\n            callback(null);\n        });\n    }, {\n        concurrency: chunkReadahead\n    });\n    const onError = (err)=>{\n        stream.emit(\"error\", err);\n        // Stop on any error.\n        stream.end();\n    };\n    // When to look for items again.\n    let refreshThreshold;\n    let minRefreshTime;\n    let refreshTimeout;\n    let fetchingPlaylist = true;\n    let ended = false;\n    let isStatic = false;\n    let lastRefresh;\n    const onQueuedEnd = (err)=>{\n        currSegment = null;\n        if (err) {\n            onError(err);\n        } else if (!fetchingPlaylist && !ended && !isStatic && requestQueue.tasks.length + requestQueue.active <= refreshThreshold) {\n            let ms = Math.max(0, minRefreshTime - (Date.now() - lastRefresh));\n            fetchingPlaylist = true;\n            refreshTimeout = setTimeout(refreshPlaylist, ms);\n        } else if ((ended || isStatic) && !requestQueue.tasks.length && !requestQueue.active) {\n            stream.end();\n        }\n    };\n    let currPlaylist;\n    let lastSeq;\n    let starttime = 0;\n    const refreshPlaylist = ()=>{\n        lastRefresh = Date.now();\n        currPlaylist = miniget_1.default(playlistURL, requestOptions);\n        currPlaylist.on(\"error\", onError);\n        forwardEvents(currPlaylist);\n        const parser = currPlaylist.pipe(new Parser(options.id));\n        parser.on(\"starttime\", (a)=>{\n            if (starttime) {\n                return;\n            }\n            starttime = a;\n            if (typeof options.begin === \"string\" && begin >= 0) {\n                begin += starttime;\n            }\n        });\n        parser.on(\"endlist\", ()=>{\n            isStatic = true;\n        });\n        parser.on(\"endearly\", currPlaylist.unpipe.bind(currPlaylist, parser));\n        let addedItems = [];\n        const addItem = (item)=>{\n            if (!item.init) {\n                if (item.seq <= lastSeq) {\n                    return;\n                }\n                lastSeq = item.seq;\n            }\n            begin = item.time;\n            requestQueue.push(item, onQueuedEnd);\n            addedItems.push(item);\n        };\n        let tailedItems = [], tailedItemsDuration = 0;\n        parser.on(\"item\", (item)=>{\n            let timedItem = Object.assign({\n                time: starttime\n            }, item);\n            if (begin <= timedItem.time) {\n                addItem(timedItem);\n            } else {\n                tailedItems.push(timedItem);\n                tailedItemsDuration += timedItem.duration;\n                // Only keep the last `liveBuffer` of items.\n                while(tailedItems.length > 1 && tailedItemsDuration - tailedItems[0].duration > liveBuffer){\n                    const lastItem = tailedItems.shift();\n                    tailedItemsDuration -= lastItem.duration;\n                }\n            }\n            starttime += timedItem.duration;\n        });\n        parser.on(\"end\", ()=>{\n            currPlaylist = null;\n            // If we are too ahead of the stream, make sure to get the\n            // latest available items with a small buffer.\n            if (!addedItems.length && tailedItems.length) {\n                tailedItems.forEach((item)=>{\n                    addItem(item);\n                });\n            }\n            // Refresh the playlist when remaining segments get low.\n            refreshThreshold = Math.max(1, Math.ceil(addedItems.length * 0.01));\n            // Throttle refreshing the playlist by looking at the duration\n            // of live items added on this refresh.\n            minRefreshTime = addedItems.reduce((total, item)=>item.duration + total, 0);\n            fetchingPlaylist = false;\n            onQueuedEnd(null);\n        });\n    };\n    refreshPlaylist();\n    stream.end = ()=>{\n        ended = true;\n        streamQueue.die();\n        requestQueue.die();\n        clearTimeout(refreshTimeout);\n        currPlaylist === null || currPlaylist === void 0 ? void 0 : currPlaylist.destroy();\n        currSegment === null || currSegment === void 0 ? void 0 : currSegment.destroy();\n        stream_1.PassThrough.prototype.end.call(stream, null);\n        return stream;\n    };\n    return stream;\n};\nm3u8stream.parseTimestamp = parse_time_1.humanStr;\nmodule.exports = m3u8stream; //# sourceMappingURL=index.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbTN1OHN0cmVhbS9kaXN0L2luZGV4LmpzIiwibWFwcGluZ3MiOiJBQUFhO0FBQ2IsSUFBSUEsa0JBQWtCLENBQUMsTUFBRyxLQUFLLE9BQUcsRUFBRUEsZUFBZSxJQUFLLFNBQVVDLEdBQUc7SUFDakUsT0FBTyxPQUFRQSxJQUFJQyxVQUFVLEdBQUlELE1BQU07UUFBRSxXQUFXQTtJQUFJO0FBQzVEO0FBQ0EsTUFBTUUsV0FBV0MsbUJBQU9BLENBQUMsc0JBQVE7QUFDakMsTUFBTUMsWUFBWUwsZ0JBQWdCSSxtQkFBT0EsQ0FBQywyREFBUztBQUNuRCxNQUFNRSxnQkFBZ0JOLGdCQUFnQkksbUJBQU9BLENBQUMsMEVBQWU7QUFDN0QsTUFBTUcsb0JBQW9CUCxnQkFBZ0JJLG1CQUFPQSxDQUFDLGtGQUFtQjtBQUNyRSxNQUFNSSxVQUFVSixtQkFBT0EsQ0FBQyw4REFBUztBQUNqQyxNQUFNSyxlQUFlTCxtQkFBT0EsQ0FBQyx3RUFBYztBQUMzQyxNQUFNTSxtQkFBbUI7SUFDckJDLE1BQU1MLGNBQWNNLE9BQU87SUFDM0IsWUFBWUwsa0JBQWtCSyxPQUFPO0FBQ3pDO0FBQ0EsSUFBSUMsYUFBYyxDQUFDQyxhQUFhQyxVQUFVLENBQUMsQ0FBQztJQUN4QyxNQUFNQyxTQUFTLElBQUliLFNBQVNjLFdBQVcsQ0FBQztRQUFFQyxlQUFlSCxRQUFRRyxhQUFhO0lBQUM7SUFDL0UsTUFBTUMsaUJBQWlCSixRQUFRSSxjQUFjLElBQUk7SUFDakQsY0FBYztJQUNkLE1BQU1DLGFBQWFMLFFBQVFLLFVBQVUsSUFBSTtJQUN6QyxNQUFNQyxpQkFBaUJOLFFBQVFNLGNBQWM7SUFDN0MsTUFBTUMsU0FBU1osZ0JBQWdCLENBQUNLLFFBQVFRLE1BQU0sSUFBSyxVQUFTQyxJQUFJLENBQUNWLGVBQWUsYUFBYSxNQUFLLEVBQUc7SUFDckcsSUFBSSxDQUFDUSxRQUFRO1FBQ1QsTUFBTUcsVUFBVSxDQUFDLFFBQVEsRUFBRVYsUUFBUVEsTUFBTSxD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QUc7UUFDVDJCLFFBQVE7UUFDUmxDLFlBQVlpRSxHQUFHO1FBQ2Z0RCxhQUFhc0QsR0FBRztRQUNoQkMsYUFBYWxDO1FBQ2JhLGlCQUFpQixRQUFRQSxpQkFBaUIsS0FBSyxJQUFJLEtBQUssSUFBSUEsYUFBYXNCLE9BQU87UUFDaEZwRSxnQkFBZ0IsUUFBUUEsZ0JBQWdCLEtBQUssSUFBSSxLQUFLLElBQUlBLFlBQVlvRSxPQUFPO1FBQzdFckcsU0FBU2MsV0FBVyxDQUFDd0YsU0FBUyxDQUFDN0QsR0FBRyxDQUFDOEQsSUFBSSxDQUFDMUYsUUFBUTtRQUNoRCxPQUFPQTtJQUNYO0lBQ0EsT0FBT0E7QUFDWDtBQUNBSCxXQUFXOEYsY0FBYyxHQUFHbEcsYUFBYWtCLFFBQVE7QUFDakRpRixPQUFPQyxPQUFPLEdBQUdoRyxZQUNqQixpQ0FBaUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9yb3NlLy4vbm9kZV9tb2R1bGVzL20zdThzdHJlYW0vZGlzdC9pbmRleC5qcz8xOWZkIl0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xudmFyIF9faW1wb3J0RGVmYXVsdCA9ICh0aGlzICYmIHRoaXMuX19pbXBvcnREZWZhdWx0KSB8fCBmdW5jdGlvbiAobW9kKSB7XG4gICAgcmV0dXJuIChtb2QgJiYgbW9kLl9fZXNNb2R1bGUpID8gbW9kIDogeyBcImRlZmF1bHRcIjogbW9kIH07XG59O1xuY29uc3Qgc3RyZWFtXzEgPSByZXF1aXJlKFwic3RyZWFtXCIpO1xuY29uc3QgbWluaWdldF8xID0gX19pbXBvcnREZWZhdWx0KHJlcXVpcmUoXCJtaW5pZ2V0XCIpKTtcbmNvbnN0IG0zdThfcGFyc2VyXzEgPSBfX2ltcG9ydERlZmF1bHQocmVxdWlyZShcIi4vbTN1OC1wYXJzZXJcIikpO1xuY29uc3QgZGFzaF9tcGRfcGFyc2VyXzEgPSBfX2ltcG9ydERlZmF1bHQocmVxdWlyZShcIi4vZGFzaC1tcGQtcGFyc2VyXCIpKTtcbmNvbnN0IHF1ZXVlXzEgPSByZXF1aXJlKFwiLi9xdWV1ZVwiKTtcbmNvbnN0IHBhcnNlX3RpbWVfMSA9IHJlcXVpcmUoXCIuL3BhcnNlLXRpbWVcIik7XG5jb25zdCBzdXBwb3J0ZWRQYXJzZXJzID0ge1xuICAgIG0zdTg6IG0zdThfcGFyc2VyXzEuZGVmYXVsdCxcbiAgICAnZGFzaC1tcGQnOiBkYXNoX21wZF9wYXJzZXJfMS5kZWZhdWx0LFxufTtcbmxldCBtM3U4c3RyZWFtID0gKChwbGF5bGlzdFVSTCwgb3B0aW9ucyA9IHt9KSA9PiB7XG4gICAgY29uc3Qgc3RyZWFtID0gbmV3IHN0cmVhbV8xLlBhc3NUaHJvdWdoKHsgaGlnaFdhdGVyTWFyazogb3B0aW9ucy5oaWdoV2F0ZXJNYXJrIH0pO1xuICAgIGNvbnN0IGNodW5rUmVhZGFoZWFkID0gb3B0aW9ucy5jaHVua1JlYWRhaGVhZCB8fCAzO1xuICAgIC8vIDIwIHNlY29uZHMuXG4gICAgY29uc3QgbGl2ZUJ1ZmZlciA9IG9wdGlvbnMubGl2ZUJ1ZmZlciB8fCAyMDAwMDtcbiAgICBjb25zdCByZXF1ZXN0T3B0aW9ucyA9IG9wdGlvbnMucmVxdWVzdE9wdGlvbnM7XG4gICAgY29uc3QgUGFyc2VyID0gc3VwcG9ydGVkUGFyc2Vyc1tvcHRpb25zLnBhcnNlciB8fCAoL1xcLm1wZCQvLnRlc3QocGxheWxpc3RVUkwpID8gJ2Rhc2gtbXBkJyA6ICdtM3U4JyldO1xuICAgIGlmICghUGFyc2VyKSB7XG4gICAgICAgIHRocm93IFR5cGVFcnJvcihgcGFyc2VyICcke29wdGlvbnMucGFyc2VyfScgbm90IHN1cHBvcnRlZGApO1xuICAgIH1cbiAgICBsZXQgYmVnaW4gPSAwO1xuICAgIGlmICh0eXBlb2Ygb3B0aW9ucy5iZWdpbiAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgYmVnaW4gPSB0eXBlb2Ygb3B0aW9ucy5iZWdpbiA9PT0gJ3N0cmluZycgP1xuICAgICAgICAgICAgcGFyc2VfdGltZV8xLmh1bWFuU3RyKG9wdGlvbnMuYmVnaW4pIDpcbiAgICAgICAgICAgIE1hdGgubWF4KG9wdGlvbnMuYmVnaW4gLSBsaXZlQnVmZmVyLCAwKTtcbiAgICB9XG4gICAgY29uc3QgZm9yd2FyZEV2ZW50cyA9IChyZXEpID0+IHtcbiAgICAgICAgZm9yIChsZXQgZXZlbnQgb2YgWydhYm9ydCcsICdyZXF1ZXN0JywgJ3Jlc3BvbnNlJywgJ3JlZGlyZWN0JywgJ3JldHJ5JywgJ3JlY29ubmVjdCddKSB7XG4gICAgICAgICAgICByZXEub24oZXZlbnQsIHN0cmVhbS5lbWl0LmJpbmQoc3RyZWFtLCBldmVudCkpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBsZXQgY3VyclNlZ21lbnQ7XG4gICAgY29uc3Qgc3RyZWFtUXVldWUgPSBuZXcgcXVldWVfMS5RdWV1ZSgocmVxLCBjYWxsYmFjaykgPT4ge1xuICAgICAgICBjdXJyU2VnbWVudCA9IHJlcTtcbiAgICAgICAgLy8gQ291bnQgdGhlIHNpemUgbWFudWFsbHksIHNpbmNlIHRoZSBgY29udGVudC1sZW5ndGhgIGhlYWRlciBpcyBub3RcbiAgICAgICAgLy8gYWx3YXlzIHRoZXJlLlxuICAgICAgICBsZXQgc2l6ZSA9IDA7XG4gICAgICAgIHJlcS5vbignZGF0YScsIChjaHVuaykgPT4gc2l6ZSArPSBjaHVuay5sZW5ndGgpO1xuICAgICAgICByZXEucGlwZShzdHJlYW0sIHsgZW5kOiBmYWxzZSB9KTtcbiAgICAgICAgcmVxLm9uKCdlbmQnLCAoKSA9PiBjYWxsYmFjayhudWxsLCBzaXplKSk7XG4gICAgfSwgeyBjb25jdXJyZW5jeTogMSB9KTtcbiAgICBsZXQgc2VnbWVudE51bWJlciA9IDA7XG4gICAgbGV0IGRvd25sb2FkZWQgPSAwO1xuICAgIGNvbnN0IHJlcXVlc3RRdWV1ZSA9IG5ldyBxdWV1ZV8xLlF1ZXVlKChzZWdtZW50LCBjYWxsYmFjaykgPT4ge1xuICAgICAgICBsZXQgcmVxT3B0aW9ucyA9IE9iamVjdC5hc3NpZ24oe30sIHJlcXVlc3RPcHRpb25zKTtcbiAgICAgICAgaWYgKHNlZ21lbnQucmFuZ2UpIHtcbiAgICAgICAgICAgIHJlcU9wdGlvbnMuaGVhZGVycyA9IE9iamVjdC5hc3NpZ24oe30sIHJlcU9wdGlvbnMuaGVhZGVycywge1xuICAgICAgICAgICAgICAgIFJhbmdlOiBgYnl0ZXM9JHtzZWdtZW50LnJhbmdlLnN0YXJ0fS0ke3NlZ21lbnQucmFuZ2UuZW5kfWAsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBsZXQgcmVxID0gbWluaWdldF8xLmRlZmF1bHQobmV3IFVSTChzZWdtZW50LnVybCwgcGxheWxpc3RVUkwpLnRvU3RyaW5nKCksIHJlcU9wdGlvbnMpO1xuICAgICAgICByZXEub24oJ2Vycm9yJywgY2FsbGJhY2spO1xuICAgICAgICBmb3J3YXJkRXZlbnRzKHJlcSk7XG4gICAgICAgIHN0cmVhbVF1ZXVlLnB1c2gocmVxLCAoXywgc2l6ZSkgPT4ge1xuICAgICAgICAgICAgZG93bmxvYWRlZCArPSArc2l6ZTtcbiAgICAgICAgICAgIHN0cmVhbS5lbWl0KCdwcm9ncmVzcycsIHtcbiAgICAgICAgICAgICAgICBudW06ICsrc2VnbWVudE51bWJlcixcbiAgICAgICAgICAgICAgICBzaXplOiBzaXplLFxuICAgICAgICAgICAgICAgIGR1cmF0aW9uOiBzZWdtZW50LmR1cmF0aW9uLFxuICAgICAgICAgICAgICAgIHVybDogc2VnbWVudC51cmwsXG4gICAgICAgICAgICB9LCByZXF1ZXN0UXVldWUudG90YWwsIGRvd25sb2FkZWQpO1xuICAgICAgICAgICAgY2FsbGJhY2sobnVsbCk7XG4gICAgICAgIH0pO1xuICAgIH0sIHsgY29uY3VycmVuY3k6IGNodW5rUmVhZGFoZWFkIH0pO1xuICAgIGNvbnN0IG9uRXJyb3IgPSAoZXJyKSA9PiB7XG4gICAgICAgIHN0cmVhbS5lbWl0KCdlcnJvcicsIGVycik7XG4gICAgICAgIC8vIFN0b3Agb24gYW55IGVycm9yLlxuICAgICAgICBzdHJlYW0uZW5kKCk7XG4gICAgfTtcbiAgICAvLyBXaGVuIHRvIGxvb2sgZm9yIGl0ZW1zIGFnYWluLlxuICAgIGxldCByZWZyZXNoVGhyZXNob2xkO1xuICAgIGxldCBtaW5SZWZyZXNoVGltZTtcbiAgICBsZXQgcmVmcmVzaFRpbWVvdXQ7XG4gICAgbGV0IGZldGNoaW5nUGxheWxpc3QgPSB0cnVlO1xuICAgIGxldCBlbmRlZCA9IGZhbHNlO1xuICAgIGxldCBpc1N0YXRpYyA9IGZhbHNlO1xuICAgIGxldCBsYXN0UmVmcmVzaDtcbiAgICBjb25zdCBvblF1ZXVlZEVuZCA9IChlcnIpID0+IHtcbiAgICAgICAgY3VyclNlZ21lbnQgPSBudWxsO1xuICAgICAgICBpZiAoZXJyKSB7XG4gICAgICAgICAgICBvbkVycm9yKGVycik7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoIWZldGNoaW5nUGxheWxpc3QgJiYgIWVuZGVkICYmICFpc1N0YXRpYyAmJlxuICAgICAgICAgICAgcmVxdWVzdFF1ZXVlLnRhc2tzLmxlbmd0aCArIHJlcXVlc3RRdWV1ZS5hY3RpdmUgPD0gcmVmcmVzaFRocmVzaG9sZCkge1xuICAgICAgICAgICAgbGV0IG1zID0gTWF0aC5tYXgoMCwgbWluUmVmcmVzaFRpbWUgLSAoRGF0ZS5ub3coKSAtIGxhc3RSZWZyZXNoKSk7XG4gICAgICAgICAgICBmZXRjaGluZ1BsYXlsaXN0ID0gdHJ1ZTtcbiAgICAgICAgICAgIHJlZnJlc2hUaW1lb3V0ID0gc2V0VGltZW91dChyZWZyZXNoUGxheWxpc3QsIG1zKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICgoZW5kZWQgfHwgaXNTdGF0aWMpICYmXG4gICAgICAgICAgICAhcmVxdWVzdFF1ZXVlLnRhc2tzLmxlbmd0aCAmJiAhcmVxdWVzdFF1ZXVlLmFjdGl2ZSkge1xuICAgICAgICAgICAgc3RyZWFtLmVuZCgpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBsZXQgY3VyclBsYXlsaXN0O1xuICAgIGxldCBsYXN0U2VxO1xuICAgIGxldCBzdGFydHRpbWUgPSAwO1xuICAgIGNvbnN0IHJlZnJlc2hQbGF5bGlzdCA9ICgpID0+IHtcbiAgICAgICAgbGFzdFJlZnJlc2ggPSBEYXRlLm5vdygpO1xuICAgICAgICBjdXJyUGxheWxpc3QgPSBtaW5pZ2V0XzEuZGVmYXVsdChwbGF5bGlzdFVSTCwgcmVxdWVzdE9wdGlvbnMpO1xuICAgICAgICBjdXJyUGxheWxpc3Qub24oJ2Vycm9yJywgb25FcnJvcik7XG4gICAgICAgIGZvcndhcmRFdmVudHMoY3VyclBsYXlsaXN0KTtcbiAgICAgICAgY29uc3QgcGFyc2VyID0gY3VyclBsYXlsaXN0LnBpcGUobmV3IFBhcnNlcihvcHRpb25zLmlkKSk7XG4gICAgICAgIHBhcnNlci5vbignc3RhcnR0aW1lJywgKGEpID0+IHtcbiAgICAgICAgICAgIGlmIChzdGFydHRpbWUpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBzdGFydHRpbWUgPSBhO1xuICAgICAgICAgICAgaWYgKHR5cGVvZiBvcHRpb25zLmJlZ2luID09PSAnc3RyaW5nJyAmJiBiZWdpbiA+PSAwKSB7XG4gICAgICAgICAgICAgICAgYmVnaW4gKz0gc3RhcnR0aW1lO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgcGFyc2VyLm9uKCdlbmRsaXN0JywgKCkgPT4geyBpc1N0YXRpYyA9IHRydWU7IH0pO1xuICAgICAgICBwYXJzZXIub24oJ2VuZGVhcmx5JywgY3VyclBsYXlsaXN0LnVucGlwZS5iaW5kKGN1cnJQbGF5bGlzdCwgcGFyc2VyKSk7XG4gICAgICAgIGxldCBhZGRlZEl0ZW1zID0gW107XG4gICAgICAgIGNvbnN0IGFkZEl0ZW0gPSAoaXRlbSkgPT4ge1xuICAgICAgICAgICAgaWYgKCFpdGVtLmluaXQpIHtcbiAgICAgICAgICAgICAgICBpZiAoaXRlbS5zZXEgPD0gbGFzdFNlcSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGxhc3RTZXEgPSBpdGVtLnNlcTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGJlZ2luID0gaXRlbS50aW1lO1xuICAgICAgICAgICAgcmVxdWVzdFF1ZXVlLnB1c2goaXRlbSwgb25RdWV1ZWRFbmQpO1xuICAgICAgICAgICAgYWRkZWRJdGVtcy5wdXNoKGl0ZW0pO1xuICAgICAgICB9O1xuICAgICAgICBsZXQgdGFpbGVkSXRlbXMgPSBbXSwgdGFpbGVkSXRlbXNEdXJhdGlvbiA9IDA7XG4gICAgICAgIHBhcnNlci5vbignaXRlbScsIChpdGVtKSA9PiB7XG4gICAgICAgICAgICBsZXQgdGltZWRJdGVtID0gT2JqZWN0LmFzc2lnbih7IHRpbWU6IHN0YXJ0dGltZSB9LCBpdGVtKTtcbiAgICAgICAgICAgIGlmIChiZWdpbiA8PSB0aW1lZEl0ZW0udGltZSkge1xuICAgICAgICAgICAgICAgIGFkZEl0ZW0odGltZWRJdGVtKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHRhaWxlZEl0ZW1zLnB1c2godGltZWRJdGVtKTtcbiAgICAgICAgICAgICAgICB0YWlsZWRJdGVtc0R1cmF0aW9uICs9IHRpbWVkSXRlbS5kdXJhdGlvbjtcbiAgICAgICAgICAgICAgICAvLyBPbmx5IGtlZXAgdGhlIGxhc3QgYGxpdmVCdWZmZXJgIG9mIGl0ZW1zLlxuICAgICAgICAgICAgICAgIHdoaWxlICh0YWlsZWRJdGVtcy5sZW5ndGggPiAxICYmXG4gICAgICAgICAgICAgICAgICAgIHRhaWxlZEl0ZW1zRHVyYXRpb24gLSB0YWlsZWRJdGVtc1swXS5kdXJhdGlvbiA+IGxpdmVCdWZmZXIpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbGFzdEl0ZW0gPSB0YWlsZWRJdGVtcy5zaGlmdCgpO1xuICAgICAgICAgICAgICAgICAgICB0YWlsZWRJdGVtc0R1cmF0aW9uIC09IGxhc3RJdGVtLmR1cmF0aW9uO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHN0YXJ0dGltZSArPSB0aW1lZEl0ZW0uZHVyYXRpb247XG4gICAgICAgIH0pO1xuICAgICAgICBwYXJzZXIub24oJ2VuZCcsICgpID0+IHtcbiAgICAgICAgICAgIGN1cnJQbGF5bGlzdCA9IG51bGw7XG4gICAgICAgICAgICAvLyBJZiB3ZSBhcmUgdG9vIGFoZWFkIG9mIHRoZSBzdHJlYW0sIG1ha2Ugc3VyZSB0byBnZXQgdGhlXG4gICAgICAgICAgICAvLyBsYXRlc3QgYXZhaWxhYmxlIGl0ZW1zIHdpdGggYSBzbWFsbCBidWZmZXIuXG4gICAgICAgICAgICBpZiAoIWFkZGVkSXRlbXMubGVuZ3RoICYmIHRhaWxlZEl0ZW1zLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgIHRhaWxlZEl0ZW1zLmZvckVhY2goaXRlbSA9PiB7IGFkZEl0ZW0oaXRlbSk7IH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gUmVmcmVzaCB0aGUgcGxheWxpc3Qgd2hlbiByZW1haW5pbmcgc2VnbWVudHMgZ2V0IGxvdy5cbiAgICAgICAgICAgIHJlZnJlc2hUaHJlc2hvbGQgPSBNYXRoLm1heCgxLCBNYXRoLmNlaWwoYWRkZWRJdGVtcy5sZW5ndGggKiAwLjAxKSk7XG4gICAgICAgICAgICAvLyBUaHJvdHRsZSByZWZyZXNoaW5nIHRoZSBwbGF5bGlzdCBieSBsb29raW5nIGF0IHRoZSBkdXJhdGlvblxuICAgICAgICAgICAgLy8gb2YgbGl2ZSBpdGVtcyBhZGRlZCBvbiB0aGlzIHJlZnJlc2guXG4gICAgICAgICAgICBtaW5SZWZyZXNoVGltZSA9XG4gICAgICAgICAgICAgICAgYWRkZWRJdGVtcy5yZWR1Y2UoKHRvdGFsLCBpdGVtKSA9PiBpdGVtLmR1cmF0aW9uICsgdG90YWwsIDApO1xuICAgICAgICAgICAgZmV0Y2hpbmdQbGF5bGlzdCA9IGZhbHNlO1xuICAgICAgICAgICAgb25RdWV1ZWRFbmQobnVsbCk7XG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgcmVmcmVzaFBsYXlsaXN0KCk7XG4gICAgc3RyZWFtLmVuZCA9ICgpID0+IHtcbiAgICAgICAgZW5kZWQgPSB0cnVlO1xuICAgICAgICBzdHJlYW1RdWV1ZS5kaWUoKTtcbiAgICAgICAgcmVxdWVzdFF1ZXVlLmRpZSgpO1xuICAgICAgICBjbGVhclRpbWVvdXQocmVmcmVzaFRpbWVvdXQpO1xuICAgICAgICBjdXJyUGxheWxpc3QgPT09IG51bGwgfHwgY3VyclBsYXlsaXN0ID09PSB2b2lkIDAgPyB2b2lkIDAgOiBjdXJyUGxheWxpc3QuZGVzdHJveSgpO1xuICAgICAgICBjdXJyU2VnbWVudCA9PT0gbnVsbCB8fCBjdXJyU2VnbWVudCA9PT0gdm9pZCAwID8gdm9pZCAwIDogY3VyclNlZ21lbnQuZGVzdHJveSgpO1xuICAgICAgICBzdHJlYW1fMS5QYXNzVGhyb3VnaC5wcm90b3R5cGUuZW5kLmNhbGwoc3RyZWFtLCBudWxsKTtcbiAgICAgICAgcmV0dXJuIHN0cmVhbTtcbiAgICB9O1xuICAgIHJldHVybiBzdHJlYW07XG59KTtcbm0zdThzdHJlYW0ucGFyc2VUaW1lc3RhbXAgPSBwYXJzZV90aW1lXzEuaHVtYW5TdHI7XG5tb2R1bGUuZXhwb3J0cyA9IG0zdThzdHJlYW07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbmRleC5qcy5tYXAiXSwibmFtZXMiOlsiX19pbXBvcnREZWZhdWx0IiwibW9kIiwiX19lc01vZHVsZSIsInN0cmVhbV8xIiwicmVxdWlyZSIsIm1pbmlnZXRfMSIsIm0zdThfcGFyc2VyXzEiLCJkYXNoX21wZF9wYXJzZXJfMSIsInF1ZXVlXzEiLCJwYXJzZV90aW1lXzEiLCJzdXBwb3J0ZWRQYXJzZXJzIiwibTN1OCIsImRlZmF1bHQiLCJtM3U4c3RyZWFtIiwicGxheWxpc3RVUkwiLCJvcHRpb25zIiwic3RyZWFtIiwiUGFzc1Rocm91Z2giLCJoaWdoV2F0ZXJNYXJrIiwiY2h1bmtSZWFkYWhlYWQiLCJsaXZlQnVmZmVyIiwicmVxdWVzdE9wdGlvbnMiLCJQYXJzZXIiLCJwYXJzZXIiLCJ0ZXN0IiwiVHlwZUVycm9yIiwiYmVnaW4iLCJodW1hblN0ciIsIk1hdGgiLCJtYXgiLCJmb3J3YXJkRXZlbnRzIiwicmVxIiwiZXZlbnQiLCJvbiIsImVtaXQiLCJiaW5kIiwiY3VyclNlZ21lbnQiLCJzdHJlYW1RdWV1ZSIsIlF1ZXVlIiwiY2FsbGJhY2siLCJzaXplIiwiY2h1bmsiLCJsZW5ndGgiLCJwaXBlIiwiZW5kIiwiY29uY3VycmVuY3kiLCJzZWdtZW50TnVtYmVyIiwiZG93bmxvYWRlZCIsInJlcXVlc3RRdWV1ZSIsInNlZ21lbnQiLCJyZXFPcHRpb25zIiwiT2JqZWN0IiwiYXNzaWduIiwicmFuZ2UiLCJoZWFkZXJzIiwiUmFuZ2UiLCJzdGFydCIsIlVSTCIsInVybCIsInRvU3RyaW5nIiwicHVzaCIsIl8iLCJudW0iLCJkdXJhdGlvbiIsInRvdGFsIiwib25FcnJvciIsImVyciIsInJlZnJlc2hUaHJlc2hvbGQiLCJtaW5SZWZyZXNoVGltZSIsInJlZnJlc2hUaW1lb3V0IiwiZmV0Y2hpbmdQbGF5bGlzdCIsImVuZGVkIiwiaXNTdGF0aWMiLCJsYXN0UmVmcmVzaCIsIm9uUXVldWVkRW5kIiwidGFza3MiLCJhY3RpdmUiLCJtcyIsIkRhdGUiLCJub3ciLCJzZXRUaW1lb3V0IiwicmVmcmVzaFBsYXlsaXN0IiwiY3VyclBsYXlsaXN0IiwibGFzdFNlcSIsInN0YXJ0dGltZSIsImlkIiwiYSIsInVucGlwZSIsImFkZGVkSXRlbXMiLCJhZGRJdGVtIiwiaXRlbSIsImluaXQiLCJzZXEiLCJ0aW1lIiwidGFpbGVkSXRlbXMiLCJ0YWlsZWRJdGVtc0R1cmF0aW9uIiwidGltZWRJdGVtIiwibGFzdEl0ZW0iLCJzaGlmdCIsImZvckVhY2giLCJjZWlsIiwicmVkdWNlIiwiZGllIiwiY2xlYXJUaW1lb3V0IiwiZGVzdHJveSIsInByb3RvdHlwZSIsImNhbGwiLCJwYXJzZVRpbWVzdGFtcCIsIm1vZHVsZSIsImV4cG9ydHMiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/m3u8stream/dist/index.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/m3u8stream/dist/m3u8-parser.js":
/*!*****************************************************!*\
  !*** ./node_modules/m3u8stream/dist/m3u8-parser.js ***!
  \*****************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nconst stream_1 = __webpack_require__(/*! stream */ \"stream\");\n/**\n * A very simple m3u8 playlist file parser that detects tags and segments.\n */ class m3u8Parser extends stream_1.Writable {\n    constructor(){\n        super();\n        this._lastLine = \"\";\n        this._seq = 0;\n        this._nextItemDuration = null;\n        this._nextItemRange = null;\n        this._lastItemRangeEnd = 0;\n        this.on(\"finish\", ()=>{\n            this._parseLine(this._lastLine);\n            this.emit(\"end\");\n        });\n    }\n    _parseAttrList(value) {\n        let attrs = {};\n        let regex = /([A-Z0-9-]+)=(?:\"([^\"]*?)\"|([^,]*?))/g;\n        let match;\n        while((match = regex.exec(value)) !== null){\n            attrs[match[1]] = match[2] || match[3];\n        }\n        return attrs;\n    }\n    _parseRange(value) {\n        if (!value) return null;\n        let svalue = value.split(\"@\");\n        let start = svalue[1] ? parseInt(svalue[1]) : this._lastItemRangeEnd + 1;\n        let end = start + parseInt(svalue[0]) - 1;\n        let range = {\n            start,\n            end\n        };\n        this._lastItemRangeEnd = range.end;\n        return range;\n    }\n    _parseLine(line) {\n        let match = line.match(/^#(EXT[A-Z0-9-]+)(?::(.*))?/);\n        if (match) {\n            // This is a tag.\n            const tag = match[1];\n            const value = match[2] || \"\";\n            switch(tag){\n                case \"EXT-X-PROGRAM-DATE-TIME\":\n                    this.emit(\"starttime\", new Date(value).getTime());\n                    break;\n                case \"EXT-X-MEDIA-SEQUENCE\":\n                    this._seq = parseInt(value);\n                    break;\n                case \"EXT-X-MAP\":\n                    {\n                        let attrs = this._parseAttrList(value);\n                        if (!attrs.URI) {\n                            this.destroy(new Error(\"`EXT-X-MAP` found without required attribute `URI`\"));\n                            return;\n                        }\n                        this.emit(\"item\", {\n                            url: attrs.URI,\n                            seq: this._seq,\n                            init: true,\n                            duration: 0,\n                            range: this._parseRange(attrs.BYTERANGE)\n                        });\n                        break;\n                    }\n                case \"EXT-X-BYTERANGE\":\n                    {\n                        this._nextItemRange = this._parseRange(value);\n                        break;\n                    }\n                case \"EXTINF\":\n                    this._nextItemDuration = Math.round(parseFloat(value.split(\",\")[0]) * 1000);\n                    break;\n                case \"EXT-X-ENDLIST\":\n                    this.emit(\"endlist\");\n                    break;\n            }\n        } else if (!/^#/.test(line) && line.trim()) {\n            // This is a segment\n            this.emit(\"item\", {\n                url: line.trim(),\n                seq: this._seq++,\n                duration: this._nextItemDuration,\n                range: this._nextItemRange\n            });\n            this._nextItemRange = null;\n        }\n    }\n    _write(chunk, encoding, callback) {\n        let lines = chunk.toString(\"utf8\").split(\"\\n\");\n        if (this._lastLine) {\n            lines[0] = this._lastLine + lines[0];\n        }\n        lines.forEach((line, i)=>{\n            if (this.destroyed) return;\n            if (i < lines.length - 1) {\n                this._parseLine(line);\n            } else {\n                // Save the last line in case it has been broken up.\n                this._lastLine = line;\n            }\n        });\n        callback();\n    }\n}\nexports[\"default\"] = m3u8Parser; //# sourceMappingURL=m3u8-parser.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbTN1OHN0cmVhbS9kaXN0L20zdTgtcGFyc2VyLmpzIiwibWFwcGluZ3MiOiJBQUFhO0FBQ2JBLDhDQUE2QztJQUFFRyxPQUFPO0FBQUssQ0FBQyxFQUFDO0FBQzdELE1BQU1DLFdBQVdDLG1CQUFPQSxDQUFDLHNCQUFRO0FBQ2pDOztDQUVDLEdBQ0QsTUFBTUMsbUJBQW1CRixTQUFTRyxRQUFRO0lBQ3RDQyxhQUFjO1FBQ1YsS0FBSztRQUNMLElBQUksQ0FBQ0MsU0FBUyxHQUFHO1FBQ2pCLElBQUksQ0FBQ0MsSUFBSSxHQUFHO1FBQ1osSUFBSSxDQUFDQyxpQkFBaUIsR0FBRztRQUN6QixJQUFJLENBQUNDLGNBQWMsR0FBRztRQUN0QixJQUFJLENBQUNDLGlCQUFpQixHQUFHO1FBQ3pCLElBQUksQ0FBQ0MsRUFBRSxDQUFDLFVBQVU7WUFDZCxJQUFJLENBQUNDLFVBQVUsQ0FBQyxJQUFJLENBQUNOLFNBQVM7WUFDOUIsSUFBSSxDQUFDTyxJQUFJLENBQUM7UUFDZDtJQUNKO0lBQ0FDLGVBQWVkLEtBQUssRUFBRTtRQUNsQixJQUFJZSxRQUFRLENBQUM7UUFDYixJQUFJQyxRQUFRO1FBQ1osSUFBSUM7UUFDSixNQUFPLENBQUNBLFFBQVFELE1BQU1FLElBQUksQ0FBQ2xCLE1BQUssTUFBTyxLQUFNO1lBQ3pDZSxLQUFLLENBQUNFLEtBQUssQ0FBQyxFQUFFLENBQUMsR0FBR0EsS0FBSyxDQUFDLEVBQUUsSUFBSUEsS0FBSyxDQUFDLEVBQUU7UUFDMUM7UUFDQSxPQUFPRjtJQUNYO0lBQ0FJLFlBQVluQixLQUFLLEVBQUU7UUFDZixJQUFJLENBQUNBLE9BQ0QsT0FBTztRQUNYLElBQUlvQixTQUFTcEIsTUFBTXFCLEtBQUssQ0FBQztRQUN6QixJQUFJQyxRQUFRRixNQUFNLENBQUMsRUFBRSxHQUFHRyxTQUFTSCxNQUFNLENBQUMsRUFBRSxJQUFJLElBQUksQ0FBQ1YsaUJBQWlCLEdBQUc7UUFDdkUsSUFBSWMsTUFBTUYsUUFBUUMsU0FBU0gsTUFBTSxDQUFDLEVBQUUsSUFBSTtRQUN4QyxJQUFJSyxRQUFRO1lBQUVIO1lBQU9FO1FBQUk7UUFDekIsSUFBSSxDQUFDZCxpQkFBaUIsR0FBR2UsTUFBTUQsR0FBRztRQUNsQyxPQUFPQztJQUNYO0lBQ0FiLFdBQVdjLElBQUksRUFBRTtRQUNiLElBQUlULFFBQVFTLEtBQUtULEtBQUssQ0FBQztRQUN2QixJQUFJQSxPQUFPO1lBQ1AsaUJBQWlCO1lBQ2pCLE1BQU1VLE1BQU1WLEtBQUssQ0FBQyxFQUFFO1lBQ3BCLE1BQU1qQixRQUFRaUIsS0FBSyxDQUFDLEVBQUUsSUFBSTtZQUMxQixPQUFRVTtnQkFDSixLQUFLO29CQUNELElBQUksQ0FBQ2QsSUFBSSxDQUFDLGFBQWEsSUFBSWUsS0FBSzVCLE9BQU82QixPQUFPO29CQUM5QztnQkFDSixLQUFLO29CQUNELElBQUksQ0FBQ3RCLElBQUksR0FBR2dCLFNBQVN2QjtvQkFDckI7Z0JBQ0osS0FBSztvQkFBYTt3QkFDZCxJQUFJZSxRQUFRLElBQUksQ0FBQ0QsY0FBYyxDQUFDZDt3QkFDaEMsSUFBSSxDQUFDZSxNQUFNZSxHQUFHLEVBQUU7NEJBQ1osSUFBSSxDQUFDQyxPQUFPLENBQUMsSUFBSUMsTUFBTTs0QkFDdkI7d0JBQ0o7d0JBQ0EsSUFBSSxDQUFDbkIsSUFBSSxDQUFDLFFBQVE7NEJBQ2RvQixLQUFLbEIsTUFBTWUsR0FBRzs0QkFDZEksS0FBSyxJQUFJLENBQUMzQixJQUFJOzRCQUNkNEIsTUFBTTs0QkFDTkMsVUFBVTs0QkFDVlgsT0FBTyxJQUFJLENBQUNOLFdBQVcsQ0FBQ0osTUFBTXNCLFNBQVM7d0JBQzNDO3dCQUNBO29CQUNKO2dCQUNBLEtBQUs7b0JBQW1CO3dCQUNwQixJQUFJLENBQUM1QixjQUFjLEdBQUcsSUFBSSxDQUFDVSxXQUFXLENBQUNuQjt3QkFDdkM7b0JBQ0o7Z0JBQ0EsS0FBSztvQkFDRCxJQUFJLENBQUNRLGlCQUFpQixHQUNsQjhCLEtBQUtDLEtBQUssQ0FBQ0MsV0FBV3hDLE1BQU1xQixLQUFLLENBQUMsSUFBSSxDQUFDLEVBQUUsSUFBSTtvQkFDakQ7Z0JBQ0osS0FBSztvQkFDRCxJQUFJLENBQUNSLElBQUksQ0FBQztvQkFDVjtZQUNSO1FBQ0osT0FDSyxJQUFJLENBQUMsS0FBSzRCLElBQUksQ0FBQ2YsU0FBU0EsS0FBS2dCLElBQUksSUFBSTtZQUN0QyxvQkFBb0I7WUFDcEIsSUFBSSxDQUFDN0IsSUFBSSxDQUFDLFFBQVE7Z0JBQ2RvQixLQUFLUCxLQUFLZ0IsSUFBSTtnQkFDZFIsS0FBSyxJQUFJLENBQUMzQixJQUFJO2dCQUNkNkIsVUFBVSxJQUFJLENBQUM1QixpQkFBaUI7Z0JBQ2hDaUIsT0FBTyxJQUFJLENBQUNoQixjQUFjO1lBQzlCO1lBQ0EsSUFBSSxDQUFDQSxjQUFjLEdBQUc7UUFDMUI7SUFDSjtJQUNBa0MsT0FBT0MsS0FBSyxFQUFFQyxRQUFRLEVBQUVDLFFBQVEsRUFBRTtRQUM5QixJQUFJQyxRQUFRSCxNQUFNSSxRQUFRLENBQUMsUUFBUTNCLEtBQUssQ0FBQztRQUN6QyxJQUFJLElBQUksQ0FBQ2YsU0FBUyxFQUFFO1lBQ2hCeUMsS0FBSyxDQUFDLEVBQUUsR0FBRyxJQUFJLENBQUN6QyxTQUFTLEdBQUd5QyxLQUFLLENBQUMsRUFBRTtRQUN4QztRQUNBQSxNQUFNRSxPQUFPLENBQUMsQ0FBQ3ZCLE1BQU13QjtZQUNqQixJQUFJLElBQUksQ0FBQ0MsU0FBUyxFQUNkO1lBQ0osSUFBSUQsSUFBSUgsTUFBTUssTUFBTSxHQUFHLEdBQUc7Z0JBQ3RCLElBQUksQ0FBQ3hDLFVBQVUsQ0FBQ2M7WUFDcEIsT0FDSztnQkFDRCxvREFBb0Q7Z0JBQ3BELElBQUksQ0FBQ3BCLFNBQVMsR0FBR29CO1lBQ3JCO1FBQ0o7UUFDQW9CO0lBQ0o7QUFDSjtBQUNBL0Msa0JBQWUsR0FBR0ksWUFDbEIsdUNBQXVDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vcm9zZS8uL25vZGVfbW9kdWxlcy9tM3U4c3RyZWFtL2Rpc3QvbTN1OC1wYXJzZXIuanM/MzZjMSJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmNvbnN0IHN0cmVhbV8xID0gcmVxdWlyZShcInN0cmVhbVwiKTtcbi8qKlxuICogQSB2ZXJ5IHNpbXBsZSBtM3U4IHBsYXlsaXN0IGZpbGUgcGFyc2VyIHRoYXQgZGV0ZWN0cyB0YWdzIGFuZCBzZWdtZW50cy5cbiAqL1xuY2xhc3MgbTN1OFBhcnNlciBleHRlbmRzIHN0cmVhbV8xLldyaXRhYmxlIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgc3VwZXIoKTtcbiAgICAgICAgdGhpcy5fbGFzdExpbmUgPSAnJztcbiAgICAgICAgdGhpcy5fc2VxID0gMDtcbiAgICAgICAgdGhpcy5fbmV4dEl0ZW1EdXJhdGlvbiA9IG51bGw7XG4gICAgICAgIHRoaXMuX25leHRJdGVtUmFuZ2UgPSBudWxsO1xuICAgICAgICB0aGlzLl9sYXN0SXRlbVJhbmdlRW5kID0gMDtcbiAgICAgICAgdGhpcy5vbignZmluaXNoJywgKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5fcGFyc2VMaW5lKHRoaXMuX2xhc3RMaW5lKTtcbiAgICAgICAgICAgIHRoaXMuZW1pdCgnZW5kJyk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBfcGFyc2VBdHRyTGlzdCh2YWx1ZSkge1xuICAgICAgICBsZXQgYXR0cnMgPSB7fTtcbiAgICAgICAgbGV0IHJlZ2V4ID0gLyhbQS1aMC05LV0rKT0oPzpcIihbXlwiXSo/KVwifChbXixdKj8pKS9nO1xuICAgICAgICBsZXQgbWF0Y2g7XG4gICAgICAgIHdoaWxlICgobWF0Y2ggPSByZWdleC5leGVjKHZhbHVlKSkgIT09IG51bGwpIHtcbiAgICAgICAgICAgIGF0dHJzW21hdGNoWzFdXSA9IG1hdGNoWzJdIHx8IG1hdGNoWzNdO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBhdHRycztcbiAgICB9XG4gICAgX3BhcnNlUmFuZ2UodmFsdWUpIHtcbiAgICAgICAgaWYgKCF2YWx1ZSlcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICBsZXQgc3ZhbHVlID0gdmFsdWUuc3BsaXQoJ0AnKTtcbiAgICAgICAgbGV0IHN0YXJ0ID0gc3ZhbHVlWzFdID8gcGFyc2VJbnQoc3ZhbHVlWzFdKSA6IHRoaXMuX2xhc3RJdGVtUmFuZ2VFbmQgKyAxO1xuICAgICAgICBsZXQgZW5kID0gc3RhcnQgKyBwYXJzZUludChzdmFsdWVbMF0pIC0gMTtcbiAgICAgICAgbGV0IHJhbmdlID0geyBzdGFydCwgZW5kIH07XG4gICAgICAgIHRoaXMuX2xhc3RJdGVtUmFuZ2VFbmQgPSByYW5nZS5lbmQ7XG4gICAgICAgIHJldHVybiByYW5nZTtcbiAgICB9XG4gICAgX3BhcnNlTGluZShsaW5lKSB7XG4gICAgICAgIGxldCBtYXRjaCA9IGxpbmUubWF0Y2goL14jKEVYVFtBLVowLTktXSspKD86OiguKikpPy8pO1xuICAgICAgICBpZiAobWF0Y2gpIHtcbiAgICAgICAgICAgIC8vIFRoaXMgaXMgYSB0YWcuXG4gICAgICAgICAgICBjb25zdCB0YWcgPSBtYXRjaFsxXTtcbiAgICAgICAgICAgIGNvbnN0IHZhbHVlID0gbWF0Y2hbMl0gfHwgJyc7XG4gICAgICAgICAgICBzd2l0Y2ggKHRhZykge1xuICAgICAgICAgICAgICAgIGNhc2UgJ0VYVC1YLVBST0dSQU0tREFURS1USU1FJzpcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5lbWl0KCdzdGFydHRpbWUnLCBuZXcgRGF0ZSh2YWx1ZSkuZ2V0VGltZSgpKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAnRVhULVgtTUVESUEtU0VRVUVOQ0UnOlxuICAgICAgICAgICAgICAgICAgICB0aGlzLl9zZXEgPSBwYXJzZUludCh2YWx1ZSk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ0VYVC1YLU1BUCc6IHtcbiAgICAgICAgICAgICAgICAgICAgbGV0IGF0dHJzID0gdGhpcy5fcGFyc2VBdHRyTGlzdCh2YWx1ZSk7XG4gICAgICAgICAgICAgICAgICAgIGlmICghYXR0cnMuVVJJKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmRlc3Ryb3kobmV3IEVycm9yKCdgRVhULVgtTUFQYCBmb3VuZCB3aXRob3V0IHJlcXVpcmVkIGF0dHJpYnV0ZSBgVVJJYCcpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB0aGlzLmVtaXQoJ2l0ZW0nLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICB1cmw6IGF0dHJzLlVSSSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlcTogdGhpcy5fc2VxLFxuICAgICAgICAgICAgICAgICAgICAgICAgaW5pdDogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGR1cmF0aW9uOiAwLFxuICAgICAgICAgICAgICAgICAgICAgICAgcmFuZ2U6IHRoaXMuX3BhcnNlUmFuZ2UoYXR0cnMuQllURVJBTkdFKSxcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjYXNlICdFWFQtWC1CWVRFUkFOR0UnOiB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX25leHRJdGVtUmFuZ2UgPSB0aGlzLl9wYXJzZVJhbmdlKHZhbHVlKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNhc2UgJ0VYVElORic6XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX25leHRJdGVtRHVyYXRpb24gPVxuICAgICAgICAgICAgICAgICAgICAgICAgTWF0aC5yb3VuZChwYXJzZUZsb2F0KHZhbHVlLnNwbGl0KCcsJylbMF0pICogMTAwMCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ0VYVC1YLUVORExJU1QnOlxuICAgICAgICAgICAgICAgICAgICB0aGlzLmVtaXQoJ2VuZGxpc3QnKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoIS9eIy8udGVzdChsaW5lKSAmJiBsaW5lLnRyaW0oKSkge1xuICAgICAgICAgICAgLy8gVGhpcyBpcyBhIHNlZ21lbnRcbiAgICAgICAgICAgIHRoaXMuZW1pdCgnaXRlbScsIHtcbiAgICAgICAgICAgICAgICB1cmw6IGxpbmUudHJpbSgpLFxuICAgICAgICAgICAgICAgIHNlcTogdGhpcy5fc2VxKyssXG4gICAgICAgICAgICAgICAgZHVyYXRpb246IHRoaXMuX25leHRJdGVtRHVyYXRpb24sXG4gICAgICAgICAgICAgICAgcmFuZ2U6IHRoaXMuX25leHRJdGVtUmFuZ2UsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHRoaXMuX25leHRJdGVtUmFuZ2UgPSBudWxsO1xuICAgICAgICB9XG4gICAgfVxuICAgIF93cml0ZShjaHVuaywgZW5jb2RpbmcsIGNhbGxiYWNrKSB7XG4gICAgICAgIGxldCBsaW5lcyA9IGNodW5rLnRvU3RyaW5nKCd1dGY4Jykuc3BsaXQoJ1xcbicpO1xuICAgICAgICBpZiAodGhpcy5fbGFzdExpbmUpIHtcbiAgICAgICAgICAgIGxpbmVzWzBdID0gdGhpcy5fbGFzdExpbmUgKyBsaW5lc1swXTtcbiAgICAgICAgfVxuICAgICAgICBsaW5lcy5mb3JFYWNoKChsaW5lLCBpKSA9PiB7XG4gICAgICAgICAgICBpZiAodGhpcy5kZXN0cm95ZWQpXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgaWYgKGkgPCBsaW5lcy5sZW5ndGggLSAxKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5fcGFyc2VMaW5lKGxpbmUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgLy8gU2F2ZSB0aGUgbGFzdCBsaW5lIGluIGNhc2UgaXQgaGFzIGJlZW4gYnJva2VuIHVwLlxuICAgICAgICAgICAgICAgIHRoaXMuX2xhc3RMaW5lID0gbGluZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIGNhbGxiYWNrKCk7XG4gICAgfVxufVxuZXhwb3J0cy5kZWZhdWx0ID0gbTN1OFBhcnNlcjtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPW0zdTgtcGFyc2VyLmpzLm1hcCJdLCJuYW1lcyI6WyJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImV4cG9ydHMiLCJ2YWx1ZSIsInN0cmVhbV8xIiwicmVxdWlyZSIsIm0zdThQYXJzZXIiLCJXcml0YWJsZSIsImNvbnN0cnVjdG9yIiwiX2xhc3RMaW5lIiwiX3NlcSIsIl9uZXh0SXRlbUR1cmF0aW9uIiwiX25leHRJdGVtUmFuZ2UiLCJfbGFzdEl0ZW1SYW5nZUVuZCIsIm9uIiwiX3BhcnNlTGluZSIsImVtaXQiLCJfcGFyc2VBdHRyTGlzdCIsImF0dHJzIiwicmVnZXgiLCJtYXRjaCIsImV4ZWMiLCJfcGFyc2VSYW5nZSIsInN2YWx1ZSIsInNwbGl0Iiwic3RhcnQiLCJwYXJzZUludCIsImVuZCIsInJhbmdlIiwibGluZSIsInRhZyIsIkRhdGUiLCJnZXRUaW1lIiwiVVJJIiwiZGVzdHJveSIsIkVycm9yIiwidXJsIiwic2VxIiwiaW5pdCIsImR1cmF0aW9uIiwiQllURVJBTkdFIiwiTWF0aCIsInJvdW5kIiwicGFyc2VGbG9hdCIsInRlc3QiLCJ0cmltIiwiX3dyaXRlIiwiY2h1bmsiLCJlbmNvZGluZyIsImNhbGxiYWNrIiwibGluZXMiLCJ0b1N0cmluZyIsImZvckVhY2giLCJpIiwiZGVzdHJveWVkIiwibGVuZ3RoIiwiZGVmYXVsdCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/m3u8stream/dist/m3u8-parser.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/m3u8stream/dist/parse-time.js":
/*!****************************************************!*\
  !*** ./node_modules/m3u8stream/dist/parse-time.js ***!
  \****************************************************/
/***/ ((__unused_webpack_module, exports) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.durationStr = exports.humanStr = void 0;\nconst numberFormat = /^\\d+$/;\nconst timeFormat = /^(?:(?:(\\d+):)?(\\d{1,2}):)?(\\d{1,2})(?:\\.(\\d{3}))?$/;\nconst timeUnits = {\n    ms: 1,\n    s: 1000,\n    m: 60000,\n    h: 3600000\n};\n/**\n * Converts human friendly time to milliseconds. Supports the format\n * 00:00:00.000 for hours, minutes, seconds, and milliseconds respectively.\n * And 0ms, 0s, 0m, 0h, and together 1m1s.\n *\n * @param {number|string} time\n * @returns {number}\n */ exports.humanStr = (time)=>{\n    if (typeof time === \"number\") {\n        return time;\n    }\n    if (numberFormat.test(time)) {\n        return +time;\n    }\n    const firstFormat = timeFormat.exec(time);\n    if (firstFormat) {\n        return +(firstFormat[1] || 0) * timeUnits.h + +(firstFormat[2] || 0) * timeUnits.m + +firstFormat[3] * timeUnits.s + +(firstFormat[4] || 0);\n    } else {\n        let total = 0;\n        const r = /(-?\\d+)(ms|s|m|h)/g;\n        let rs;\n        while((rs = r.exec(time)) !== null){\n            total += +rs[1] * timeUnits[rs[2]];\n        }\n        return total;\n    }\n};\n/**\n * Parses a duration string in the form of \"123.456S\", returns milliseconds.\n *\n * @param {string} time\n * @returns {number}\n */ exports.durationStr = (time)=>{\n    let total = 0;\n    const r = /(\\d+(?:\\.\\d+)?)(S|M|H)/g;\n    let rs;\n    while((rs = r.exec(time)) !== null){\n        total += +rs[1] * timeUnits[rs[2].toLowerCase()];\n    }\n    return total;\n}; //# sourceMappingURL=parse-time.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbTN1OHN0cmVhbS9kaXN0L3BhcnNlLXRpbWUuanMiLCJtYXBwaW5ncyI6IkFBQWE7QUFDYkEsOENBQTZDO0lBQUVHLE9BQU87QUFBSyxDQUFDLEVBQUM7QUFDN0RELG1CQUFtQixHQUFHQSxnQkFBZ0IsR0FBRyxLQUFLO0FBQzlDLE1BQU1JLGVBQWU7QUFDckIsTUFBTUMsYUFBYTtBQUNuQixNQUFNQyxZQUFZO0lBQ2RDLElBQUk7SUFDSkMsR0FBRztJQUNIQyxHQUFHO0lBQ0hDLEdBQUc7QUFDUDtBQUNBOzs7Ozs7O0NBT0MsR0FDRFYsZ0JBQWdCLEdBQUcsQ0FBQ1c7SUFDaEIsSUFBSSxPQUFPQSxTQUFTLFVBQVU7UUFDMUIsT0FBT0E7SUFDWDtJQUNBLElBQUlQLGFBQWFRLElBQUksQ0FBQ0QsT0FBTztRQUN6QixPQUFPLENBQUNBO0lBQ1o7SUFDQSxNQUFNRSxjQUFjUixXQUFXUyxJQUFJLENBQUNIO0lBQ3BDLElBQUlFLGFBQWE7UUFDYixPQUFPLENBQUdBLENBQUFBLFdBQVcsQ0FBQyxFQUFFLElBQUksS0FBS1AsVUFBVUksQ0FBQyxHQUN2QyxDQUFFRyxDQUFBQSxXQUFXLENBQUMsRUFBRSxJQUFJLEtBQUtQLFVBQVVHLENBQUMsR0FDcEMsQ0FBQ0ksV0FBVyxDQUFDLEVBQUUsR0FBR1AsVUFBVUUsQ0FBQyxHQUM5QixDQUFFSyxDQUFBQSxXQUFXLENBQUMsRUFBRSxJQUFJO0lBQzVCLE9BQ0s7UUFDRCxJQUFJRSxRQUFRO1FBQ1osTUFBTUMsSUFBSTtRQUNWLElBQUlDO1FBQ0osTUFBTyxDQUFDQSxLQUFLRCxFQUFFRixJQUFJLENBQUNILEtBQUksTUFBTyxLQUFNO1lBQ2pDSSxTQUFTLENBQUNFLEVBQUUsQ0FBQyxFQUFFLEdBQUdYLFNBQVMsQ0FBQ1csRUFBRSxDQUFDLEVBQUUsQ0FBQztRQUN0QztRQUNBLE9BQU9GO0lBQ1g7QUFDSjtBQUNBOzs7OztDQUtDLEdBQ0RmLG1CQUFtQixHQUFHLENBQUNXO0lBQ25CLElBQUlJLFFBQVE7SUFDWixNQUFNQyxJQUFJO0lBQ1YsSUFBSUM7SUFDSixNQUFPLENBQUNBLEtBQUtELEVBQUVGLElBQUksQ0FBQ0gsS0FBSSxNQUFPLEtBQU07UUFDakNJLFNBQVMsQ0FBQ0UsRUFBRSxDQUFDLEVBQUUsR0FBR1gsU0FBUyxDQUFDVyxFQUFFLENBQUMsRUFBRSxDQUFDQyxXQUFXLEdBQUc7SUFDcEQ7SUFDQSxPQUFPSDtBQUNYLEdBQ0Esc0NBQXNDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vcm9zZS8uL25vZGVfbW9kdWxlcy9tM3U4c3RyZWFtL2Rpc3QvcGFyc2UtdGltZS5qcz80ZmJlIl0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuZXhwb3J0cy5kdXJhdGlvblN0ciA9IGV4cG9ydHMuaHVtYW5TdHIgPSB2b2lkIDA7XG5jb25zdCBudW1iZXJGb3JtYXQgPSAvXlxcZCskLztcbmNvbnN0IHRpbWVGb3JtYXQgPSAvXig/Oig/OihcXGQrKTopPyhcXGR7MSwyfSk6KT8oXFxkezEsMn0pKD86XFwuKFxcZHszfSkpPyQvO1xuY29uc3QgdGltZVVuaXRzID0ge1xuICAgIG1zOiAxLFxuICAgIHM6IDEwMDAsXG4gICAgbTogNjAwMDAsXG4gICAgaDogMzYwMDAwMCxcbn07XG4vKipcbiAqIENvbnZlcnRzIGh1bWFuIGZyaWVuZGx5IHRpbWUgdG8gbWlsbGlzZWNvbmRzLiBTdXBwb3J0cyB0aGUgZm9ybWF0XG4gKiAwMDowMDowMC4wMDAgZm9yIGhvdXJzLCBtaW51dGVzLCBzZWNvbmRzLCBhbmQgbWlsbGlzZWNvbmRzIHJlc3BlY3RpdmVseS5cbiAqIEFuZCAwbXMsIDBzLCAwbSwgMGgsIGFuZCB0b2dldGhlciAxbTFzLlxuICpcbiAqIEBwYXJhbSB7bnVtYmVyfHN0cmluZ30gdGltZVxuICogQHJldHVybnMge251bWJlcn1cbiAqL1xuZXhwb3J0cy5odW1hblN0ciA9ICh0aW1lKSA9PiB7XG4gICAgaWYgKHR5cGVvZiB0aW1lID09PSAnbnVtYmVyJykge1xuICAgICAgICByZXR1cm4gdGltZTtcbiAgICB9XG4gICAgaWYgKG51bWJlckZvcm1hdC50ZXN0KHRpbWUpKSB7XG4gICAgICAgIHJldHVybiArdGltZTtcbiAgICB9XG4gICAgY29uc3QgZmlyc3RGb3JtYXQgPSB0aW1lRm9ybWF0LmV4ZWModGltZSk7XG4gICAgaWYgKGZpcnN0Rm9ybWF0KSB7XG4gICAgICAgIHJldHVybiAoKyhmaXJzdEZvcm1hdFsxXSB8fCAwKSAqIHRpbWVVbml0cy5oKSArXG4gICAgICAgICAgICAoKyhmaXJzdEZvcm1hdFsyXSB8fCAwKSAqIHRpbWVVbml0cy5tKSArXG4gICAgICAgICAgICAoK2ZpcnN0Rm9ybWF0WzNdICogdGltZVVuaXRzLnMpICtcbiAgICAgICAgICAgICsoZmlyc3RGb3JtYXRbNF0gfHwgMCk7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBsZXQgdG90YWwgPSAwO1xuICAgICAgICBjb25zdCByID0gLygtP1xcZCspKG1zfHN8bXxoKS9nO1xuICAgICAgICBsZXQgcnM7XG4gICAgICAgIHdoaWxlICgocnMgPSByLmV4ZWModGltZSkpICE9PSBudWxsKSB7XG4gICAgICAgICAgICB0b3RhbCArPSArcnNbMV0gKiB0aW1lVW5pdHNbcnNbMl1dO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0b3RhbDtcbiAgICB9XG59O1xuLyoqXG4gKiBQYXJzZXMgYSBkdXJhdGlvbiBzdHJpbmcgaW4gdGhlIGZvcm0gb2YgXCIxMjMuNDU2U1wiLCByZXR1cm5zIG1pbGxpc2Vjb25kcy5cbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gdGltZVxuICogQHJldHVybnMge251bWJlcn1cbiAqL1xuZXhwb3J0cy5kdXJhdGlvblN0ciA9ICh0aW1lKSA9PiB7XG4gICAgbGV0IHRvdGFsID0gMDtcbiAgICBjb25zdCByID0gLyhcXGQrKD86XFwuXFxkKyk/KShTfE18SCkvZztcbiAgICBsZXQgcnM7XG4gICAgd2hpbGUgKChycyA9IHIuZXhlYyh0aW1lKSkgIT09IG51bGwpIHtcbiAgICAgICAgdG90YWwgKz0gK3JzWzFdICogdGltZVVuaXRzW3JzWzJdLnRvTG93ZXJDYXNlKCldO1xuICAgIH1cbiAgICByZXR1cm4gdG90YWw7XG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cGFyc2UtdGltZS5qcy5tYXAiXSwibmFtZXMiOlsiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJleHBvcnRzIiwidmFsdWUiLCJkdXJhdGlvblN0ciIsImh1bWFuU3RyIiwibnVtYmVyRm9ybWF0IiwidGltZUZvcm1hdCIsInRpbWVVbml0cyIsIm1zIiwicyIsIm0iLCJoIiwidGltZSIsInRlc3QiLCJmaXJzdEZvcm1hdCIsImV4ZWMiLCJ0b3RhbCIsInIiLCJycyIsInRvTG93ZXJDYXNlIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/m3u8stream/dist/parse-time.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/m3u8stream/dist/queue.js":
/*!***********************************************!*\
  !*** ./node_modules/m3u8stream/dist/queue.js ***!
  \***********************************************/
/***/ ((__unused_webpack_module, exports) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.Queue = void 0;\nclass Queue {\n    /**\n     * A really simple queue with concurrency.\n     *\n     * @param {Function} worker\n     * @param {Object} options\n     * @param {!number} options.concurrency\n     */ constructor(worker, options = {}){\n        this._worker = worker;\n        this._concurrency = options.concurrency || 1;\n        this.tasks = [];\n        this.total = 0;\n        this.active = 0;\n    }\n    /**\n     * Push a task to the queue.\n     *\n     *  @param {T} item\n     *  @param {!Function} callback\n     */ push(item, callback) {\n        this.tasks.push({\n            item,\n            callback\n        });\n        this.total++;\n        this._next();\n    }\n    /**\n     * Process next job in queue.\n     */ _next() {\n        if (this.active >= this._concurrency || !this.tasks.length) {\n            return;\n        }\n        const { item, callback } = this.tasks.shift();\n        let callbackCalled = false;\n        this.active++;\n        this._worker(item, (err, result)=>{\n            if (callbackCalled) {\n                return;\n            }\n            this.active--;\n            callbackCalled = true;\n            callback === null || callback === void 0 ? void 0 : callback(err, result);\n            this._next();\n        });\n    }\n    /**\n     * Stops processing queued jobs.\n     */ die() {\n        this.tasks = [];\n    }\n}\nexports.Queue = Queue; //# sourceMappingURL=queue.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbTN1OHN0cmVhbS9kaXN0L3F1ZXVlLmpzIiwibWFwcGluZ3MiOiJBQUFhO0FBQ2JBLDhDQUE2QztJQUFFRyxPQUFPO0FBQUssQ0FBQyxFQUFDO0FBQzdERCxhQUFhLEdBQUcsS0FBSztBQUNyQixNQUFNRTtJQUNGOzs7Ozs7S0FNQyxHQUNEQyxZQUFZQyxNQUFNLEVBQUVDLFVBQVUsQ0FBQyxDQUFDLENBQUU7UUFDOUIsSUFBSSxDQUFDQyxPQUFPLEdBQUdGO1FBQ2YsSUFBSSxDQUFDRyxZQUFZLEdBQUdGLFFBQVFHLFdBQVcsSUFBSTtRQUMzQyxJQUFJLENBQUNDLEtBQUssR0FBRyxFQUFFO1FBQ2YsSUFBSSxDQUFDQyxLQUFLLEdBQUc7UUFDYixJQUFJLENBQUNDLE1BQU0sR0FBRztJQUNsQjtJQUNBOzs7OztLQUtDLEdBQ0RDLEtBQUtDLElBQUksRUFBRUMsUUFBUSxFQUFFO1FBQ2pCLElBQUksQ0FBQ0wsS0FBSyxDQUFDRyxJQUFJLENBQUM7WUFBRUM7WUFBTUM7UUFBUztRQUNqQyxJQUFJLENBQUNKLEtBQUs7UUFDVixJQUFJLENBQUNLLEtBQUs7SUFDZDtJQUNBOztLQUVDLEdBQ0RBLFFBQVE7UUFDSixJQUFJLElBQUksQ0FBQ0osTUFBTSxJQUFJLElBQUksQ0FBQ0osWUFBWSxJQUFJLENBQUMsSUFBSSxDQUFDRSxLQUFLLENBQUNPLE1BQU0sRUFBRTtZQUN4RDtRQUNKO1FBQ0EsTUFBTSxFQUFFSCxJQUFJLEVBQUVDLFFBQVEsRUFBRSxHQUFHLElBQUksQ0FBQ0wsS0FBSyxDQUFDUSxLQUFLO1FBQzNDLElBQUlDLGlCQUFpQjtRQUNyQixJQUFJLENBQUNQLE1BQU07UUFDWCxJQUFJLENBQUNMLE9BQU8sQ0FBQ08sTUFBTSxDQUFDTSxLQUFLQztZQUNyQixJQUFJRixnQkFBZ0I7Z0JBQ2hCO1lBQ0o7WUFDQSxJQUFJLENBQUNQLE1BQU07WUFDWE8saUJBQWlCO1lBQ2pCSixhQUFhLFFBQVFBLGFBQWEsS0FBSyxJQUFJLEtBQUssSUFBSUEsU0FBU0ssS0FBS0M7WUFDbEUsSUFBSSxDQUFDTCxLQUFLO1FBQ2Q7SUFDSjtJQUNBOztLQUVDLEdBQ0RNLE1BQU07UUFDRixJQUFJLENBQUNaLEtBQUssR0FBRyxFQUFFO0lBQ25CO0FBQ0o7QUFDQVQsYUFBYSxHQUFHRSxPQUNoQixpQ0FBaUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9yb3NlLy4vbm9kZV9tb2R1bGVzL20zdThzdHJlYW0vZGlzdC9xdWV1ZS5qcz83N2MxIl0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuZXhwb3J0cy5RdWV1ZSA9IHZvaWQgMDtcbmNsYXNzIFF1ZXVlIHtcbiAgICAvKipcbiAgICAgKiBBIHJlYWxseSBzaW1wbGUgcXVldWUgd2l0aCBjb25jdXJyZW5jeS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IHdvcmtlclxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zXG4gICAgICogQHBhcmFtIHshbnVtYmVyfSBvcHRpb25zLmNvbmN1cnJlbmN5XG4gICAgICovXG4gICAgY29uc3RydWN0b3Iod29ya2VyLCBvcHRpb25zID0ge30pIHtcbiAgICAgICAgdGhpcy5fd29ya2VyID0gd29ya2VyO1xuICAgICAgICB0aGlzLl9jb25jdXJyZW5jeSA9IG9wdGlvbnMuY29uY3VycmVuY3kgfHwgMTtcbiAgICAgICAgdGhpcy50YXNrcyA9IFtdO1xuICAgICAgICB0aGlzLnRvdGFsID0gMDtcbiAgICAgICAgdGhpcy5hY3RpdmUgPSAwO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBQdXNoIGEgdGFzayB0byB0aGUgcXVldWUuXG4gICAgICpcbiAgICAgKiAgQHBhcmFtIHtUfSBpdGVtXG4gICAgICogIEBwYXJhbSB7IUZ1bmN0aW9ufSBjYWxsYmFja1xuICAgICAqL1xuICAgIHB1c2goaXRlbSwgY2FsbGJhY2spIHtcbiAgICAgICAgdGhpcy50YXNrcy5wdXNoKHsgaXRlbSwgY2FsbGJhY2sgfSk7XG4gICAgICAgIHRoaXMudG90YWwrKztcbiAgICAgICAgdGhpcy5fbmV4dCgpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBQcm9jZXNzIG5leHQgam9iIGluIHF1ZXVlLlxuICAgICAqL1xuICAgIF9uZXh0KCkge1xuICAgICAgICBpZiAodGhpcy5hY3RpdmUgPj0gdGhpcy5fY29uY3VycmVuY3kgfHwgIXRoaXMudGFza3MubGVuZ3RoKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgeyBpdGVtLCBjYWxsYmFjayB9ID0gdGhpcy50YXNrcy5zaGlmdCgpO1xuICAgICAgICBsZXQgY2FsbGJhY2tDYWxsZWQgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5hY3RpdmUrKztcbiAgICAgICAgdGhpcy5fd29ya2VyKGl0ZW0sIChlcnIsIHJlc3VsdCkgPT4ge1xuICAgICAgICAgICAgaWYgKGNhbGxiYWNrQ2FsbGVkKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5hY3RpdmUtLTtcbiAgICAgICAgICAgIGNhbGxiYWNrQ2FsbGVkID0gdHJ1ZTtcbiAgICAgICAgICAgIGNhbGxiYWNrID09PSBudWxsIHx8IGNhbGxiYWNrID09PSB2b2lkIDAgPyB2b2lkIDAgOiBjYWxsYmFjayhlcnIsIHJlc3VsdCk7XG4gICAgICAgICAgICB0aGlzLl9uZXh0KCk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTdG9wcyBwcm9jZXNzaW5nIHF1ZXVlZCBqb2JzLlxuICAgICAqL1xuICAgIGRpZSgpIHtcbiAgICAgICAgdGhpcy50YXNrcyA9IFtdO1xuICAgIH1cbn1cbmV4cG9ydHMuUXVldWUgPSBRdWV1ZTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXF1ZXVlLmpzLm1hcCJdLCJuYW1lcyI6WyJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImV4cG9ydHMiLCJ2YWx1ZSIsIlF1ZXVlIiwiY29uc3RydWN0b3IiLCJ3b3JrZXIiLCJvcHRpb25zIiwiX3dvcmtlciIsIl9jb25jdXJyZW5jeSIsImNvbmN1cnJlbmN5IiwidGFza3MiLCJ0b3RhbCIsImFjdGl2ZSIsInB1c2giLCJpdGVtIiwiY2FsbGJhY2siLCJfbmV4dCIsImxlbmd0aCIsInNoaWZ0IiwiY2FsbGJhY2tDYWxsZWQiLCJlcnIiLCJyZXN1bHQiLCJkaWUiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/m3u8stream/dist/queue.js\n");

/***/ })

};
;